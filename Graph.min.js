"undefined"!=typeof html4&&(html4.ATTRIBS["a::target"]=0),mxConstants.SHADOW_OPACITY=.25,mxConstants.SHADOWCOLOR="#000000",mxConstants.VML_SHADOWCOLOR="#d0d0d0",mxGraph.prototype.pageBreakColor="#c0c0c0",mxGraph.prototype.pageScale=1,function(){try{if(null!=navigator&&null!=navigator.language){var a=navigator.language.toLowerCase();mxGraph.prototype.pageFormat="en-us"===a||"en-ca"===a||"es-mx"===a?mxConstants.PAGE_FORMAT_LETTER_PORTRAIT:mxConstants.PAGE_FORMAT_A4_PORTRAIT}}catch(a){}}(),mxText.prototype.baseSpacingTop=5,mxText.prototype.baseSpacingBottom=1,mxGraphModel.prototype.ignoreRelativeEdgeParent=!1,mxGraphView.prototype.gridImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhCgAKAJEAAAAAAP///8zMzP///yH5BAEAAAMALAAAAAAKAAoAAAIJ1I6py+0Po2wFADs=":IMAGE_PATH+"/grid.gif",mxGraphView.prototype.gridSteps=4,mxGraphView.prototype.minGridSize=4,mxGraphView.prototype.gridColor="#e0e0e0",mxSvgCanvas2D.prototype.foAltText="[Not supported by viewer]",Graph=function(a,b,c,d,e){mxGraph.call(this,a,b,c,d),this.themes=e||this.defaultThemes;var f=this.baseUrl,g=f.indexOf("//");if(this.domainUrl="",this.domainPathUrl="",g>0){var h=f.indexOf("/",g+2);h>0&&(this.domainUrl=f.substring(0,h)),h=f.lastIndexOf("/"),h>0&&(this.domainPathUrl=f.substring(0,h+1))}if(this.isHtmlLabel=function(a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);return"1"==c.html||"wrap"==c[mxConstants.STYLE_WHITE_SPACE]},this.edgeMode){var i={point:null,event:null,state:null,handle:null,selected:!1};this.addListener(mxEvent.FIRE_MOUSE_EVENT,mxUtils.bind(this,function(a,b){if("mouseDown"==b.getProperty("eventName")&&this.isEnabled()){var c=b.getProperty("event");if(!mxEvent.isControlDown(c.getEvent())&&!mxEvent.isShiftDown(c.getEvent())){var d=c.getState();if(null!=d&&this.model.isEdge(d.cell))if(i.point=new mxPoint(c.getGraphX(),c.getGraphY()),i.selected=this.isCellSelected(d.cell),i.state=d,i.event=c,null!=d.text&&null!=d.text.boundingBox&&mxUtils.contains(d.text.boundingBox,c.getGraphX(),c.getGraphY()))i.handle=mxEvent.LABEL_HANDLE;else{var e=this.selectionCellsHandler.getHandler(d.cell);null!=e&&null!=e.bends&&e.bends.length>0&&(i.handle=e.getHandleForEvent(c))}}}}));this.addMouseListener({mouseDown:function(a,b){},mouseMove:mxUtils.bind(this,function(a,b){if(this.isEnabled()&&!this.panningHandler.isActive()&&!mxEvent.isControlDown(b.getEvent())&&!mxEvent.isShiftDown(b.getEvent())&&!mxEvent.isAltDown(b.getEvent())){var c=this.tolerance;if(null!=i.point&&null!=i.state&&null!=i.event){var d=i.state;if(Math.abs(i.point.x-b.getGraphX())>c*this.view.scale||Math.abs(i.point.y-b.getGraphY())>c*this.view.scale){this.isCellSelected(d.cell)||this.setSelectionCell(d.cell);var e=this.selectionCellsHandler.getHandler(d.cell);if(null!=e&&null!=e.bends&&e.bends.length>0){var f=e.getHandleForEvent(i.event),g=this.view.getEdgeStyle(d),h=g==mxEdgeStyle.EntityRelation;if(i.selected||i.handle!=mxEvent.LABEL_HANDLE||(f=i.handle),h&&0!=f&&f!=e.bends.length-1&&f!=mxEvent.LABEL_HANDLE)!h||null==d.visibleSourceState&&null==d.visibleTargetState||(this.graphHandler.reset(),b.consume());else if(f==mxEvent.LABEL_HANDLE||0==f||null!=d.visibleSourceState||f==e.bends.length-1||null!=d.visibleTargetState){if(!h&&f!=mxEvent.LABEL_HANDLE){var j=d.absolutePoints;if(null!=j&&(null==g&&null==f||g==mxEdgeStyle.OrthConnector)&&(f=i.handle,null==f)){var k=new mxRectangle(i.point.x,i.point.y);if(k.grow(mxEdgeHandler.prototype.handleImage.width/2),mxUtils.contains(k,j[0].x,j[0].y))f=0;else if(mxUtils.contains(k,j[j.length-1].x,j[j.length-1].y))f=e.bends.length-1;else{var l=null!=g&&(2==j.length||3==j.length&&(0==Math.round(j[0].x-j[1].x)&&0==Math.round(j[1].x-j[2].x)||0==Math.round(j[0].y-j[1].y)&&0==Math.round(j[1].y-j[2].y)));l?f=2:(f=mxUtils.findNearestSegment(d,i.point.x,i.point.y),null==g?f=mxEvent.VIRTUAL_HANDLE-f:f+=1)}}null==f&&(f=mxEvent.VIRTUAL_HANDLE)}e.start(b.getGraphX(),b.getGraphX(),f),i.state=null,i.event=null,i.point=null,i.handle=null,i.selected=!1,b.consume(),this.graphHandler.reset()}}}}else{var d=b.getState();if(null!=d&&this.model.isEdge(d.cell)){var m=null,j=d.absolutePoints;if(null!=j){var k=new mxRectangle(b.getGraphX(),b.getGraphY());if(k.grow(mxEdgeHandler.prototype.handleImage.width/2),null!=d.text&&null!=d.text.boundingBox&&mxUtils.contains(d.text.boundingBox,b.getGraphX(),b.getGraphY()))m="move";else if(mxUtils.contains(k,j[0].x,j[0].y)||mxUtils.contains(k,j[j.length-1].x,j[j.length-1].y))m="pointer";else if(null!=d.visibleSourceState||null!=d.visibleTargetState){var n=this.view.getEdgeStyle(d);if(m="crosshair",n!=mxEdgeStyle.EntityRelation&&this.isOrthogonal(d)){var o=mxUtils.findNearestSegment(d,b.getGraphX(),b.getGraphY());o<j.length-1&&o>=0&&(m=0==Math.round(j[o].x-j[o+1].x)?"col-resize":"row-resize")}}}null!=m&&d.setCursor(m)}}}}),mouseUp:mxUtils.bind(this,function(a,b){i.state=null,i.event=null,i.point=null,i.handle=null})})}if(this.cellRenderer.getLabelValue=function(a){var b=mxCellRenderer.prototype.getLabelValue.apply(this,arguments);return a.view.graph.isHtmlLabel(a.cell)&&(b=1!=a.style.html?mxUtils.htmlEntities(b,!1):a.view.graph.sanitizeHtml(b)),b},"undefined"!=typeof mxVertexHandler){this.setConnectable(!0),this.setDropEnabled(!0),this.setPanning(!0),this.setTooltips(!0),this.setAllowLoops(!0),this.allowAutoPanning=!0,this.resetEdgesOnConnect=!1,this.constrainChildren=!1,this.constrainRelativeChildren=!0,this.graphHandler.scrollOnMove=!1,this.graphHandler.scaleGrid=!0,this.connectionHandler.setCreateTarget(!1),this.connectionHandler.insertBeforeSource=!0,this.connectionHandler.isValidSource=function(a,b){return!1},this.alternateEdgeStyle="vertical",null==d&&this.loadStylesheet();var k=this.graphHandler.getGuideStates;this.graphHandler.getGuideStates=function(){var a=k.apply(this,arguments);if(this.graph.pageVisible){for(var b=[],c=this.graph.pageFormat,d=this.graph.pageScale,e=c.width*d,f=c.height*d,g=this.graph.view.translate,h=this.graph.view.scale,i=this.graph.getPageLayout(),j=0;j<i.width;j++)b.push(new mxRectangle(((i.x+j)*e+g.x)*h,(i.y*f+g.y)*h,e*h,f*h));for(var l=0;l<i.height;l++)b.push(new mxRectangle((i.x*e+g.x)*h,((i.y+l)*f+g.y)*h,e*h,f*h));a=b.concat(a)}return a},mxDragSource.prototype.dragElementZIndex=mxPopupMenu.prototype.zIndex,mxGuide.prototype.getGuideColor=function(a,b){return null==a.cell?"#ffa500":mxConstants.GUIDE_COLOR},this.graphHandler.createPreviewShape=function(a){return this.previewColor="#000000"==this.graph.background?"#ffffff":mxGraphHandler.prototype.previewColor,mxGraphHandler.prototype.createPreviewShape.apply(this,arguments)},this.graphHandler.getCells=function(a){for(var b=mxGraphHandler.prototype.getCells.apply(this,arguments),c=[],d=0;d<b.length;d++){var e=this.graph.view.getState(b[d]),f=null!=e?e.style:this.graph.getCellStyle(b[d]);if("1"==mxUtils.getValue(f,"part","0")){var g=this.graph.model.getParent(b[d]);this.graph.model.isVertex(g)&&mxUtils.indexOf(b,g)<0&&c.push(g)}else c.push(b[d])}return c},this.connectionHandler.createTargetVertex=function(a,b){var c=this.graph.view.getState(b),d=null!=c?c.style:this.graph.getCellStyle(b);if(mxUtils.getValue(d,"part",!1)){var e=this.graph.model.getParent(b);this.graph.model.isVertex(e)&&(b=e)}return mxConnectionHandler.prototype.createTargetVertex.apply(this,arguments)};var l=new mxRubberband(this);this.getRubberband=function(){return l};var m=(new Date).getTime(),n=0,o=this.connectionHandler.mouseMove;this.connectionHandler.mouseMove=function(){var a=this.currentState;o.apply(this,arguments),a!=this.currentState?(m=(new Date).getTime(),n=0):n=(new Date).getTime()-m};var p=this.connectionHandler.isOutlineConnectEvent;this.connectionHandler.isOutlineConnectEvent=function(a){return null!=this.currentState&&a.getState()==this.currentState&&n>2e3||(null==this.currentState||"0"!=mxUtils.getValue(this.currentState.style,"outlineConnect","1"))&&p.apply(this,arguments)};var q=this.isToggleEvent;this.isToggleEvent=function(a){return q.apply(this,arguments)||mxEvent.isShiftDown(a)};var r=l.isForceRubberbandEvent;l.isForceRubberbandEvent=function(a){return r.apply(this,arguments)||mxUtils.hasScrollbars(this.graph.container)&&mxClient.IS_FF&&mxClient.IS_WIN&&null==a.getState()&&mxEvent.isTouchEvent(a.getEvent())};var s=null;this.panningHandler.addListener(mxEvent.PAN_START,mxUtils.bind(this,function(){this.isEnabled()&&(s=this.container.style.cursor,this.container.style.cursor="move")})),this.panningHandler.addListener(mxEvent.PAN_END,mxUtils.bind(this,function(){this.isEnabled()&&(this.container.style.cursor=s)})),this.popupMenuHandler.autoExpand=!0,this.popupMenuHandler.isSelectOnPopup=function(a){return mxEvent.isMouseEvent(a.getEvent())};var t=this.click;this.click=function(a){if(this.isEnabled()||a.isConsumed())return t.apply(this,arguments);var b=a.getCell();if(null!=b){var c=this.getLinkForCell(b);null!=c&&window.open(c)}};var u=this.getCursorForCell;this.getCursorForCell=function(a){if(this.isEnabled())return u.apply(this,arguments);var b=this.getLinkForCell(a);return null!=b?"pointer":void 0},this.selectRegion=function(a,b){var c=this.getAllCells(a.x,a.y,a.width,a.height);return this.selectCellsForEvent(c,b),c},this.getAllCells=function(a,b,c,d,e,f){if(f=null!=f?f:[],c>0||d>0){var g=this.getModel(),h=a+c,i=b+d;if(null==e&&(e=this.getCurrentRoot(),null==e&&(e=g.getRoot())),null!=e)for(var j=g.getChildCount(e),k=0;k<j;k++){var l=g.getChildAt(e,k),m=this.view.getState(l);if(null!=m&&this.isCellVisible(l)&&"1"!=mxUtils.getValue(m.style,"locked","0")){var n=mxUtils.getValue(m.style,mxConstants.STYLE_ROTATION)||0,o=m;0!=n&&(o=mxUtils.getBoundingBox(o,n)),(g.isEdge(l)||g.isVertex(l))&&o.x>=a&&o.y+o.height<=i&&o.y>=b&&o.x+o.width<=h&&f.push(l),this.getAllCells(a,b,c,d,l,f)}}}return f};var v=this.graphHandler.shouldRemoveCellsFromParent;this.graphHandler.shouldRemoveCellsFromParent=function(a,b,c){return!this.graph.isCellSelected(a)&&v.apply(this,arguments)},this.isCellLocked=function(a){for(var b=this.view.getState(a);null!=b;){if("1"==mxUtils.getValue(b.style,"locked","0"))return!0;b=this.view.getState(this.model.getParent(b.cell))}return!1};var w=null;this.addListener(mxEvent.FIRE_MOUSE_EVENT,mxUtils.bind(this,function(a,b){if("mouseDown"==b.getProperty("eventName")){var c=b.getProperty("event"),d=c.getState();w=null==d||this.isSelectionEmpty()||this.isCellSelected(d.cell)?null:this.getSelectionCells()}})),this.addListener(mxEvent.TAP_AND_HOLD,mxUtils.bind(this,function(a,b){if(!mxEvent.isMultiTouchEvent(b)){var c=b.getProperty("event"),d=b.getProperty("cell");if(null==d){var e=mxUtils.convertPoint(this.container,mxEvent.getClientX(c),mxEvent.getClientY(c));l.start(e.x,e.y)}else null!=w?this.addSelectionCells(w):this.getSelectionCount()>1&&this.isCellSelected(d)&&this.removeSelectionCell(d);w=null,b.consume()}})),this.connectionHandler.selectCells=function(a,b){this.graph.setSelectionCell(b||a)},this.connectionHandler.constraintHandler.isStateIgnored=function(a,b){return b&&a.view.graph.isCellSelected(a.cell)},this.selectionModel.addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){var a=this.connectionHandler.constraintHandler;null!=a.currentFocus&&a.isStateIgnored(a.currentFocus,!0)&&(a.currentFocus=null,a.constraints=null,a.destroyIcons()),a.destroyFocusHighlight()})),Graph.touchStyle&&this.initTouch();var x=this.updateMouseEvent;this.updateMouseEvent=function(a){return a=x.apply(this,arguments),this.isCellLocked(a.getCell())&&(a.state=null),a}}},Graph.touchStyle=mxClient.IS_TOUCH||mxClient.IS_FF&&mxClient.IS_WIN||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||null==window.urlParams||"1"==urlParams.touch,Graph.fileSupport=null!=window.File&&null!=window.FileReader&&null!=window.FileList&&(null==window.urlParams||"0"!=urlParams.filesupport),mxUtils.extend(Graph,mxGraph),Graph.prototype.minFitScale=null,Graph.prototype.maxFitScale=null,Graph.prototype.linkPolicy="frame"==urlParams.target?"blank":urlParams.target||"auto",Graph.prototype.linkTarget="frame"==urlParams.target?"_self":"_blank",Graph.prototype.defaultScrollbars=!mxClient.IS_IOS,Graph.prototype.defaultPageVisible=!0,Graph.prototype.lightbox=!1,Graph.prototype.defaultGraphBackground="#ffffff",Graph.prototype.scrollTileSize=new mxRectangle(0,0,400,400),Graph.prototype.transparentBackground=!0,Graph.prototype.defaultEdgeLength=80,Graph.prototype.edgeMode=!1,Graph.prototype.connectionArrowsEnabled=!0,Graph.prototype.placeholderPattern=new RegExp("%(date{.*}|[^%^{^}]+)%","g"),Graph.prototype.absoluteUrlPattern=new RegExp("^(?:[a-z]+:)?//","i"),Graph.prototype.defaultThemeName="default",Graph.prototype.defaultThemes={},Graph.prototype.baseUrl=window!=window.top?document.referrer:document.location.toString(),Graph.prototype.init=function(a){mxGraph.prototype.init.apply(this,arguments),this.cellRenderer.initializeLabel=function(a,b){mxCellRenderer.prototype.initializeLabel.apply(this,arguments),mxEvent.addListener(b.node,"click",mxUtils.bind(this,function(c){for(var d=mxEvent.getSource(c);null!=d&&d!=b.node;){if("A"==d.nodeName){var e=d.getAttribute("href");if(null!=e){var f=a.view.graph.isBlankLink(e)?a.view.graph.linkTarget:"_top";e=a.view.graph.getAbsoluteUrl(e),"_self"==f&&window!=window.top?window.location.href=e:window.open(e,f),mxEvent.consume(c)}break}d=d.parentNode}}))},this.initLayoutManager()},Graph.prototype.initLayoutManager=function(){this.layoutManager=new mxLayoutManager(this),this.layoutManager.getLayout=function(a){var b=this.graph.view.getState(a),c=null!=b?b.style:this.graph.getCellStyle(a);if("stackLayout"==c.childLayout){var d=new mxStackLayout(this.graph,!0);return d.resizeParentMax=!0,d.horizontal="1"==mxUtils.getValue(c,"horizontalStack","1"),d.resizeParent="1"==mxUtils.getValue(c,"resizeParent","1"),d.resizeLast="1"==mxUtils.getValue(c,"resizeLast","0"),d.marginLeft=c.marginLeft||0,d.marginRight=c.marginRight||0,d.marginTop=c.marginTop||0,d.marginBottom=c.marginBottom||0,d.fill=!0,d}if("treeLayout"==c.childLayout){var e=new mxCompactTreeLayout(this.graph);return e.horizontal="1"==mxUtils.getValue(c,"horizontalTree","1"),e.resizeParent="1"==mxUtils.getValue(c,"resizeParent","1"),e.groupPadding=mxUtils.getValue(c,"parentPadding",20),e.levelDistance=mxUtils.getValue(c,"treeLevelDistance",30),e.maintainParentLocation=!0,e.edgeRouting=!1,e.resetEdges=!1,e}if("flowLayout"==c.childLayout){var f=new mxHierarchicalLayout(this.graph,mxUtils.getValue(c,"flowOrientation",mxConstants.DIRECTION_EAST));return f.resizeParent="1"==mxUtils.getValue(c,"resizeParent","1"),f.parentBorder=mxUtils.getValue(c,"parentPadding",20),f.maintainParentLocation=!0,f.intraCellSpacing=mxUtils.getValue(c,"intraCellSpacing",mxHierarchicalLayout.prototype.intraCellSpacing),f.interRankCellSpacing=mxUtils.getValue(c,"interRankCellSpacing",mxHierarchicalLayout.prototype.interRankCellSpacing),f.interHierarchySpacing=mxUtils.getValue(c,"interHierarchySpacing",mxHierarchicalLayout.prototype.interHierarchySpacing),f.parallelEdgeSpacing=mxUtils.getValue(c,"parallelEdgeSpacing",mxHierarchicalLayout.prototype.parallelEdgeSpacing),f}return null}},Graph.prototype.getPageSize=function(){return this.pageVisible?new mxRectangle(0,0,this.pageFormat.width*this.pageScale,this.pageFormat.height*this.pageScale):this.scrollTileSize},Graph.prototype.getPageLayout=function(){var a=this.getPageSize(),b=this.getGraphBounds();if(0==b.width||0==b.height)return new mxRectangle(0,0,1,1);var c=Math.ceil(b.x/this.view.scale-this.view.translate.x),d=Math.ceil(b.y/this.view.scale-this.view.translate.y),e=Math.floor(b.width/this.view.scale),f=Math.floor(b.height/this.view.scale),g=Math.floor(c/a.width),h=Math.floor(d/a.height),i=Math.ceil((c+e)/a.width)-g,j=Math.ceil((d+f)/a.height)-h;return new mxRectangle(g,h,i,j)},Graph.prototype.sanitizeHtml=function(a,b){function c(a){return null!=a&&"javascript:"!==a.toString().toLowerCase().substring(0,11)?a:null}function d(a){return a}return html_sanitize(a,c,d)},Graph.prototype.updatePlaceholders=function(){var b=(this.model,!1);for(var c in this.model.cells){var d=this.model.cells[c];this.isReplacePlaceholders(d)&&(this.view.invalidate(d,!1,!1),b=!0)}b&&this.view.validate()},Graph.prototype.isReplacePlaceholders=function(a){return null!=a.value&&"object"==typeof a.value&&"1"==a.value.getAttribute("placeholders")},Graph.prototype.isIgnoreTerminalEvent=function(a){return mxEvent.isShiftDown(a)&&mxEvent.isControlDown(a)},Graph.prototype.isSplitTarget=function(a,b,c){return!mxEvent.isShiftDown(c)&&mxGraph.prototype.isSplitTarget.apply(this,arguments)},Graph.prototype.getLabel=function(a){var b=mxGraph.prototype.getLabel.apply(this,arguments);return null!=b&&this.isReplacePlaceholders(a)&&null==a.getAttribute("placeholder")&&(b=this.replacePlaceholders(a,b)),b},Graph.prototype.isLabelMovable=function(a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);return!this.isCellLocked(a)&&(this.model.isEdge(a)&&this.edgeLabelsMovable||this.model.isVertex(a)&&(this.vertexLabelsMovable||"1"==mxUtils.getValue(c,"labelMovable","0")))},mxGraph.prototype.setGridSize=function(a){this.gridSize=a,this.fireEvent(new mxEventObject("gridSizeChanged"))},Graph.prototype.getGlobalVariable=function(a){var b=null;if("date"==a)b=(new Date).toLocaleDateString();else if("time"==a)b=(new Date).toLocaleTimeString();else if("timestamp"==a)b=(new Date).toLocaleString();else if("date{"==a.substring(0,5)){var c=a.substring(5,a.length-1);b=this.formatDate(new Date,c)}return b},Graph.prototype.formatDate=function(a,b,c){null==this.dateFormatCache&&(this.dateFormatCache={i18n:{dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},masks:{default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"}});var d=this.dateFormatCache,e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,f=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,g=/[^-+\dA-Z]/g,h=function(a,b){for(a=String(a),b=b||2;a.length<b;)a="0"+a;return a};if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(a)||/\d/.test(a)||(b=a,a=void 0),a=a?new Date(a):new Date,isNaN(a))throw SyntaxError("invalid date");b=String(d.masks[b]||b||d.masks.default),"UTC:"==b.slice(0,4)&&(b=b.slice(4),c=!0);var i=c?"getUTC":"get",j=a[i+"Date"](),k=a[i+"Day"](),l=a[i+"Month"](),m=a[i+"FullYear"](),n=a[i+"Hours"](),o=a[i+"Minutes"](),p=a[i+"Seconds"](),q=a[i+"Milliseconds"](),r=c?0:a.getTimezoneOffset(),s={d:j,dd:h(j),ddd:d.i18n.dayNames[k],dddd:d.i18n.dayNames[k+7],m:l+1,mm:h(l+1),mmm:d.i18n.monthNames[l],mmmm:d.i18n.monthNames[l+12],yy:String(m).slice(2),yyyy:m,h:n%12||12,hh:h(n%12||12),H:n,HH:h(n),M:o,MM:h(o),s:p,ss:h(p),l:h(q,3),L:h(q>99?Math.round(q/10):q),t:n<12?"a":"p",tt:n<12?"am":"pm",T:n<12?"A":"P",TT:n<12?"AM":"PM",Z:c?"UTC":(String(a).match(f)||[""]).pop().replace(g,""),o:(r>0?"-":"+")+h(100*Math.floor(Math.abs(r)/60)+Math.abs(r)%60,4),S:["th","st","nd","rd"][j%10>3?0:(j%100-j%10!=10)*j%10]};return b.replace(e,function(a){return a in s?s[a]:a.slice(1,a.length-1)})},Graph.prototype.createLayersDialog=function(){var a=document.createElement("div");a.style.position="absolute";for(var b=this.getModel(),c=b.getChildCount(b.root),d=0;d<c;d++)!function(c){var d=document.createElement("div");d.style.overflow="hidden",d.style.textOverflow="ellipsis",d.style.padding="2px",d.style.whiteSpace="nowrap";var e=document.createElement("input");e.setAttribute("type","checkbox"),b.isVisible(c)&&(e.setAttribute("checked","checked"),e.defaultChecked=!0),d.appendChild(e);var f=c.value||mxResources.get("background")||"Background";d.setAttribute("title",f),mxUtils.write(d,f),a.appendChild(d),mxEvent.addListener(e,"click",function(){null!=e.getAttribute("checked")?e.removeAttribute("checked"):e.setAttribute("checked","checked"),b.setVisible(c,e.checked)})}(b.getChildAt(b.root,d));return a},Graph.prototype.replacePlaceholders=function(a,b){for(var c=[],d=0;match=this.placeholderPattern.exec(b);){var e=match[0];if(e.length>2&&"%label%"!=e&&"%tooltip%"!=e){var f=null;if(match.index>d&&"%"==b.charAt(match.index-1))f=e.substring(1);else{var g=e.substring(1,e.length-1);if(g.indexOf("{")<0)for(var h=a;null==f&&null!=h;)null!=h.value&&"object"==typeof h.value&&(f=h.hasAttribute(g)?null!=h.getAttribute(g)?h.getAttribute(g):"":null),h=this.model.getParent(h);null==f&&(f=this.getGlobalVariable(g))}c.push(b.substring(d,match.index)+(null!=f?f:e)),d=match.index+e.length}}return c.push(b.substring(d)),c.join("")},Graph.prototype.selectCellsForConnectVertex=function(a,b,c){2==a.length&&this.model.isVertex(a[1])?(this.setSelectionCell(a[1]),null!=c&&(mxEvent.isTouchEvent(b)?c.update(c.getState(this.view.getState(a[1]))):c.reset()),this.scrollCellToVisible(a[1])):this.setSelectionCells(a)},Graph.prototype.connectVertex=function(a,b,c,d,e){var f=a.geometry.relative&&null!=a.parent.geometry?new mxPoint(a.parent.geometry.width*a.geometry.x,a.parent.geometry.height*a.geometry.y):new mxPoint(a.geometry.x,a.geometry.y);b==mxConstants.DIRECTION_NORTH?(f.x+=a.geometry.width/2,f.y-=c):b==mxConstants.DIRECTION_SOUTH?(f.x+=a.geometry.width/2,f.y+=a.geometry.height+c):b==mxConstants.DIRECTION_WEST?(f.x-=c,f.y+=a.geometry.height/2):(f.x+=a.geometry.width+c,f.y+=a.geometry.height/2);var g=this.view.getState(this.model.getParent(a)),h=this.view.scale,i=this.view.translate,j=i.x*h,k=i.y*h;this.model.isVertex(g.cell)&&(j=g.x,k=g.y),this.model.isVertex(a.parent)&&a.geometry.relative&&(f.x+=a.parent.geometry.x,f.y+=a.parent.geometry.y);var l=mxEvent.isControlDown(d)&&!e?null:this.getCellAt(j+f.x*h,k+f.y*h);this.model.isAncestor(l,a)&&(l=null);for(var m=l;null!=m;){if(this.isCellLocked(m)){l=null;break}m=this.model.getParent(m)}if(null!=l){var n=this.view.getState(a),o=this.view.getState(l);null!=n&&null!=o&&mxUtils.intersects(n,o)&&(l=null)}var p=!mxEvent.isShiftDown(d)||e;if(p&&(b==mxConstants.DIRECTION_NORTH?f.y-=a.geometry.height/2:b==mxConstants.DIRECTION_SOUTH?f.y+=a.geometry.height/2:b==mxConstants.DIRECTION_WEST?f.x-=a.geometry.width/2:f.x+=a.geometry.width/2),null!=l&&!this.isCellConnectable(l)){var q=this.getModel().getParent(l);this.getModel().isVertex(q)&&this.isCellConnectable(q)&&(l=q)}l!=a&&!this.model.isEdge(l)&&this.isCellConnectable(l)||(l=null);var r=[];this.model.beginUpdate();try{var s=l;if(null==s&&p){for(var t=a,u=this.getCellGeometry(a);null!=u&&u.relative;)t=this.getModel().getParent(t),u=this.getCellGeometry(t);var v=this.view.getState(t),w=null!=v?v.style:this.getCellStyle(t);if(mxUtils.getValue(w,"part",!1)){var x=this.model.getParent(t);this.model.isVertex(x)&&(t=x)}s=this.duplicateCells([t],!1)[0];var u=this.getCellGeometry(s);null!=u&&(u.x=f.x-u.width/2,u.y=f.y-u.height/2)}var y=null;null!=this.layoutManager&&(y=this.layoutManager.getLayout(this.model.getParent(a)));var z=mxEvent.isControlDown(d)&&p||null==l&&null!=y&&y.constructor==mxStackLayout?null:this.insertEdge(this.model.getParent(a),null,"",a,s,this.createCurrentEdgeStyle());if(null!=z&&this.connectionHandler.insertBeforeSource){for(var A=null,B=a;null!=B.parent&&null!=B.geometry&&B.geometry.relative&&B.parent!=z.parent;)B=this.model.getParent(B);if(null!=B&&null!=B.parent&&B.parent==z.parent){var A=B.parent.getIndex(B);B.parent.insert(z,A)}}if(null==l&&null!=s&&null!=y&&null!=a.parent&&y.constructor==mxStackLayout&&b==mxConstants.DIRECTION_WEST){var A=a.parent.getIndex(a);a.parent.insert(s,A)}null!=z&&r.push(z),null==l&&null!=s&&r.push(s),null==s&&null!=z&&z.geometry.setTerminalPoint(f,!1),null!=z&&this.fireEvent(new mxEventObject("cellsInserted","cells",[z]))}finally{this.model.endUpdate()}return r},Graph.prototype.getIndexableText=function(){var a=document.createElement("div"),b=[],c="";for(var d in this.model.cells){var e=this.model.cells[d];(this.model.isVertex(e)||this.model.isEdge(e))&&(this.isHtmlLabel(e)?(a.innerHTML=this.getLabel(e),c=mxUtils.extractTextWithWhitespace([a])):c=this.getLabel(e),c=mxUtils.trim(c.replace(/[\x00-\x1F\x7F-\x9F]|\s+/g," ")),c.length>0&&b.push(c))}return b.join(" ")},Graph.prototype.convertValueToString=function(a){if(null!=a.value&&"object"==typeof a.value){if(this.isReplacePlaceholders(a)&&null!=a.getAttribute("placeholder")){for(var b=a.getAttribute("placeholder"),c=a,d=null;null==d&&null!=c;)null!=c.value&&"object"==typeof c.value&&(d=c.hasAttribute(b)?null!=c.getAttribute(b)?c.getAttribute(b):"":null),c=this.model.getParent(c);return d||""}return a.value.getAttribute("label")}return mxGraph.prototype.convertValueToString.apply(this,arguments)},Graph.prototype.getLinkForCell=function(a){if(null!=a.value&&"object"==typeof a.value){var b=a.value.getAttribute("link");return null!=b&&"javascript:"===b.toLowerCase().substring(0,11)&&(b=b.substring(11)),b}return null},Graph.prototype.getCellStyle=function(a){var b=mxGraph.prototype.getCellStyle.apply(this,arguments);if(null!=a&&null!=this.layoutManager){var c=this.model.getParent(a);if(this.model.isVertex(c)&&this.isCellCollapsed(a)){var d=this.layoutManager.getLayout(c);null!=d&&d.constructor==mxStackLayout&&(b[mxConstants.STYLE_HORIZONTAL]=!d.horizontal)}}return b},Graph.prototype.updateAlternateBounds=function(a,b,c){if(null!=a&&null!=b&&null!=this.layoutManager&&null!=b.alternateBounds){var d=this.layoutManager.getLayout(this.model.getParent(a));null!=d&&d.constructor==mxStackLayout&&(d.horizontal?b.alternateBounds.height=0:b.alternateBounds.width=0)}mxGraph.prototype.updateAlternateBounds.apply(this,arguments)},Graph.prototype.isMoveCellsEvent=function(a){return mxEvent.isShiftDown(a)},Graph.prototype.foldCells=function(a,b,c,d,e){if(b=null!=b&&b,null==c&&(c=this.getFoldableCells(this.getSelectionCells(),a)),null!=c){this.model.beginUpdate();try{if(mxGraph.prototype.foldCells.apply(this,arguments),null!=this.layoutManager)for(var f=0;f<c.length;f++){var g=this.view.getState(c[f]),h=this.getCellGeometry(c[f]);if(null!=g&&null!=h){var i=Math.round(h.width-g.width/this.view.scale),j=Math.round(h.height-g.height/this.view.scale);if(0!=j||0!=i){var k=this.model.getParent(c[f]),l=this.layoutManager.getLayout(k);null==l?null!=e&&this.isMoveCellsEvent(e)&&this.moveSiblings(g,k,i,j):null!=e&&mxEvent.isAltDown(e)||l.constructor!=mxStackLayout||l.resizeLast||this.resizeParentStacks(k,l,i,j)}}}}finally{this.model.endUpdate()}this.isEnabled()&&this.setSelectionCells(c)}},Graph.prototype.moveSiblings=function(a,b,c,d){this.model.beginUpdate();try{for(var e=this.getCellsBeyond(a.x,a.y,b,!0,!0),f=0;f<e.length;f++)if(e[f]!=a.cell){var g=this.view.getState(e[f]),h=this.getCellGeometry(e[f]);null!=g&&null!=h&&(h=h.clone(),h.translate(Math.round(c*Math.max(0,Math.min(1,(g.x-a.x)/a.width))),Math.round(d*Math.max(0,Math.min(1,(g.y-a.y)/a.height)))),this.model.setGeometry(e[f],h))}}finally{this.model.endUpdate()}},Graph.prototype.resizeParentStacks=function(a,b,c,d){if(null!=this.layoutManager&&null!=b&&b.constructor==mxStackLayout&&!b.resizeLast){this.model.beginUpdate();try{for(var e=b.horizontal;null!=a&&null!=b&&b.constructor==mxStackLayout&&b.horizontal==e&&!b.resizeLast;){var f=this.getCellGeometry(a),g=this.view.getState(a);null!=g&&null!=f&&(f=f.clone(),b.horizontal?f.width+=c+Math.min(0,g.width/this.view.scale-f.width):f.height+=d+Math.min(0,g.height/this.view.scale-f.height),this.model.setGeometry(a,f)),a=this.model.getParent(a),b=this.layoutManager.getLayout(a)}}finally{this.model.endUpdate()}}},Graph.prototype.isContainer=function(a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);return this.isSwimlane(a)?"0"!=c.container:"1"==c.container},Graph.prototype.isCellConnectable=function(a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);return null!=c.connectable?"0"!=c.connectable:mxGraph.prototype.isCellConnectable.apply(this,arguments)},Graph.prototype.selectAll=function(a){a=a||this.getDefaultParent(),this.isCellLocked(a)||mxGraph.prototype.selectAll.apply(this,arguments)},Graph.prototype.selectCells=function(a,b,c){c=c||this.getDefaultParent(),this.isCellLocked(c)||mxGraph.prototype.selectCells.apply(this,arguments)},Graph.prototype.getSwimlaneAt=function(a,b,c){return c=c||this.getDefaultParent(),this.isCellLocked(c)?null:mxGraph.prototype.getSwimlaneAt.apply(this,arguments)},Graph.prototype.isCellFoldable=function(a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);return this.foldingEnabled&&!this.isCellLocked(a)&&(this.isContainer(a)&&"0"!=c.collapsible||!this.isContainer(a)&&"1"==c.collapsible)},Graph.prototype.reset=function(){this.isEditing()&&this.stopEditing(!0),this.escape(),this.isSelectionEmpty()||this.clearSelection()},Graph.prototype.zoom=function(a,b){a=Math.max(.01,Math.min(this.view.scale*a,160))/this.view.scale,mxGraph.prototype.zoom.apply(this,arguments)},Graph.prototype.zoomIn=function(){this.view.scale<.15?this.zoom((this.view.scale+.01)/this.view.scale):this.zoom(Math.round(this.view.scale*this.zoomFactor*20)/20/this.view.scale)},Graph.prototype.zoomOut=function(){this.view.scale<=.15?this.zoom((this.view.scale-.01)/this.view.scale):this.zoom(Math.round(this.view.scale*(1/this.zoomFactor)*20)/20/this.view.scale)},Graph.prototype.getTooltipForCell=function(a){var b="";if(mxUtils.isNode(a.value)){var c=a.value.getAttribute("tooltip");if(null!=c)null!=c&&this.isReplacePlaceholders(a)&&(c=this.replacePlaceholders(a,c)),b=this.sanitizeHtml(c);else{var d=["label","tooltip","placeholders","placeholder"],e=a.value.attributes;this.isEnabled()&&d.push("link");for(var f=0;f<e.length;f++)mxUtils.indexOf(d,e[f].nodeName)<0&&e[f].nodeValue.length>0&&(b+=("link"!=e[f].nodeName?e[f].nodeName+":":"")+mxUtils.htmlEntities(e[f].nodeValue)+"\n");b.length>0&&(b=b.substring(0,b.length-1))}}return b},Graph.prototype.stringToBytes=function(a){for(var b=new Array(a.length),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b},Graph.prototype.bytesToString=function(a){for(var b=new Array(a.length),c=0;c<a.length;c++)b[c]=String.fromCharCode(a[c]);return b.join("")},Graph.prototype.compress=function(a){if(null==a||0==a.length||"undefined"==typeof pako)return a;var b=this.bytesToString(pako.deflateRaw(encodeURIComponent(a)));return window.btoa?btoa(b):Base64.encode(b,!0)},Graph.prototype.decompress=function(a){if(null==a||0==a.length||"undefined"==typeof pako)return a;var b=window.atob?atob(a):Base64.decode(a,!0);return this.zapGremlins(decodeURIComponent(this.bytesToString(pako.inflateRaw(b))))},Graph.prototype.zapGremlins=function(a){for(var b=[],c=0;c<a.length;c++){var d=a.charCodeAt(c);(d>=32||9==d||10==d||13==d)&&b.push(a.charAt(c))}return b.join("")},HoverIcons=function(a){this.graph=a,this.init()},HoverIcons.prototype.arrowSpacing=6,HoverIcons.prototype.updateDelay=500,HoverIcons.prototype.activationDelay=140,HoverIcons.prototype.currentState=null,HoverIcons.prototype.activeArrow=null,HoverIcons.prototype.inactiveOpacity=15,HoverIcons.prototype.checkCollisions=!0,HoverIcons.prototype.triangleUp=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAOCAYAAAAxDQxDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0ZBN0E3M0U5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0ZBN0E3M0Y5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3RkE3QTczQzk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3RkE3QTczRDk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pj625P8AAACySURBVHjaYmRY956BROABxF+A+AgpmpjIsGQjEO8CYidaWeQHtYQNiDmBeAspljGRYMlqqCUwALPMg1oWhWCxBNmyjVCHUGQRyJKlOCyBATaoQ/zItSgciFcQsATdshBSLYqC+oSZhMTCBnVYFLEWgRQuItESGGCG6o0iZFECBZagW5aAyyKQxBwKLUG2bD4Qp6FblAyVoIYlyGAmzDIWKGMmA+0AyGw2RjIKVbIAQIABAFJRHSSk2rPoAAAAAElFTkSuQmCC":IMAGE_PATH+"/triangle-up.png",26,14),
  HoverIcons.prototype.triangleRight=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAaCAYAAACHD21cAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NThDQzc5RTU5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NThDQzc5RTY5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1OENDNzlFMzk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1OENDNzlFNDk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrHdKTUAAADDSURBVHjanNTBCgFRFIfxMeTZyEKkiBSRxbwREZGiNFZKWSnvY6OUUv6n7ilZaL459XVXv6a5c+cWovQeaSZqFoGJwzpVozzQZq4GeSDCv7AYcJ9Cx0vVpdDxWrUpdLxVLQr/4jjDBpYDblDoeKdqFDpOHRP4jSsU2rzVg8KnqqpbDFFdXck7vlRTXciuOjqT72ioo07k5Nju9dSRnFVHB/J3GBqqPf0fx2pDbwBDK3Ln2MdN1CLraSiFNcn6JJ+PAAMAbnMl1tyDPD8AAAAASUVORK5CYII=":IMAGE_PATH+"/triangle-right.png",14,26),HoverIcons.prototype.triangleDown=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAOCAYAAAAxDQxDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NThDQzc5RTk5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NThDQzc5RUE5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1OENDNzlFNzk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1OENDNzlFODk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv9xyy0AAADESURBVHjaYmRY956BHoAJiHOA+D+NcRrIoilAnEVDz6QD8SwWKGc6EP8F4plUtiQRiBfAgg4GZkEl/lLBgr/IlqBbxACViKPQMgxLQIAFi8JlUHoREDOTYUkckhkMuHyEbFkEEP8i0ZJobJbgswgE1gBxKJGW/YI6bCW+fIQPbCLCsl9Qn6whlGEZiLDMH4i/47AklJAlxFoEAjuA2AfNMpglm4gtgogF+5As+wX15SZiNbOQmHxBlrkBMQ/Ul0QDgAADAC8qRII7g4RyAAAAAElFTkSuQmCC":IMAGE_PATH+"/triangle-down.png",26,14),HoverIcons.prototype.triangleLeft=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAaCAYAAACHD21cAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0ZBN0E3M0E5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0ZBN0E3M0I5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1OENDNzlFQjk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1OENDNzlFQzk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pi1fu2cAAADXSURBVHjalNTRB8JQFMfxVROxPyl6iuipRJFS2kv/TU89lY0piyw9pP6r3iP6He7Ndd3de87haxMfd+1ua0TVOxLOCuVNIdqiHZ1I4AbtUUsC6fIO6jzhwoWB/hOCU5Tpy+PCCTq5kA+OfKgODlGJ2r7/YMMBqkLIhn0uMmEP3VGH+zQQ7KKnBGmY+O6eD77QGH2kkOYhxeZdJTzjYnsfb2jOwbHjt6s6ltJHTmNa+SuFNBe0rMOh9/GM1i7M+QIUKLVxzNy2XB0zyYomTqUr6jnqLfoJMADoxSMHt6pxsAAAAABJRU5ErkJggg==":IMAGE_PATH+"/triangle-left.png",14,26),HoverIcons.prototype.roundDrop=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTgxRjYzRTU1MDRFMTFFNEExQ0VFNDQwNDhGNzg2RDkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTgxRjYzRTY1MDRFMTFFNEExQ0VFNDQwNDhGNzg2RDkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFODFGNjNFMzUwNEUxMUU0QTFDRUU0NDA0OEY3ODZEOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFODFGNjNFNDUwNEUxMUU0QTFDRUU0NDA0OEY3ODZEOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuJ657wAAAE0SURBVHjaYvz//z8DPQATA50AC4zBuP4DLjXaQOwMxJZArAfE8lDxh0B8CYiPA/FeIL6KTfP/QAFUi7AABSBOAOJoIFbBIq8FxRFAfAeIlwLxAiB+gNdHaMABiIuB2IfIkAE5pB6IjYG4F4gPEBNHIEtaSLAEGfhA9ToQskgB6hNrCuLdGmqGAj6LEsj0CTafJeCySBsa8dQC0VAzMSxyxpG6yAUqUDMxLLKkQT61xGaRHg0s0sNmkTwNLJKne1mHbNFDGpj/EJtFl2hg0SVsFh2ngUXHsVm0F1oKUwvcgZqJYdFVaFFPLbAUuY5CT3Wg+mQLFSzZAjULZ6H6AFqfHKXAkqNQMx4Qqo9AlVYNmT7bAtV7gNga9gDURWfxVOXoEY+3KmeENbdo3ThhHHbtOoAAAwDmEETshQ0fBAAAAABJRU5ErkJggg==":IMAGE_PATH+"/round-drop.png",26,26),HoverIcons.prototype.refreshTarget=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAYAAACoPemuAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDQxNERDRTU1QjY1MTFFNDkzNTRFQTVEMTdGMTdBQjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDQxNERDRTY1QjY1MTFFNDkzNTRFQTVEMTdGMTdBQjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0NDE0RENFMzVCNjUxMUU0OTM1NEVBNUQxN0YxN0FCNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0NDE0RENFNDVCNjUxMUU0OTM1NEVBNUQxN0YxN0FCNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsvuX50AAANaSURBVHja7FjRZ1tRGD9ZJ1NCyIQSwrivI4Q8hCpjlFDyFEoYfSp9Ko1QWnmo0If+BSXkIfo0QirTMUpeGo2EPfWllFYjZMLKLDJn53d3biU337m5J223bPbxk5t7v+/c3/2+73znO8fDOWezKM/YjMpz68Lj8ejY+QTeCCwLxOS9qPxtyN+6wAeBTwJ31CCO0cJDjXBGBN4LfIepSwykTUT1bgpuib0SONIgo8KRHOtRiCFcvUcgZeGrHPNBxLIyFPyRgTGz0xLbegJCdmzpElue5KlAIMDX19d5uVzm5+fnfDAYmMA17uEZdOx2Yvb/sHlu2S0xwymn5ufneTab5b1ej08S6EAXNrDd2dnhiUTim21MvMtwQ6yiIrWwsMDPzs64rsBmf3/fvM7n89TYlUnEllSkQqEQv7q64g+Vk5MTVXosORErU0Zer5f0FEIlw2N6MxwO82QyaXql2+2SxDqdjopYWUUsqEp45IldqtWq6UWVh/1+P7+8vCTJ4QMUJSRIEXuneoH96w8PDyeWAnhSJfCqwm6NIlaklFdXV0cGhRcQ2mlJQXK5nMq2YPEZbnteU1U2lUqN/D84OGD9fl+5fgnSrFarsUwmw0qlEru4uBjTicViTk3Cr27HSnxR+Doyz0ZE1CAWiUTusbu7y9rttlZv5fP5WDQavYfIMba4uEipfhF8XtqJoZXx/uH+sC/4vPg7OljZZQbsCmLtYzc3N6zRaJhotVrmfx0xDINtbm6athYUeXpHdbBNaqZUKpWxWXV7e2vex+xaWVnhc3NzjrPUXgexyCt0m67LBV7uJMITjqRE4o8tZeg8FPpFitgapYxiOC0poFgsji1jKNo6BZZckrAGUtJsNk1vqAihCBcKhTE7hNWhqw2qFnGy5UFOUYJVIJ1OjzSE+BCEilon0URavRmBqnbbQ00AXbm+vnZc9O1tj72OnQoc2+cwygRkb2+P1et17ZoEm3g87lRmjgWZ00kbXkNuse6/Bu2wlegIxfb2tuvWGroO4bO2c4bbzUh60mxDXm1sbJhhxkQYnhS4h2fUZoRAWnf7lv8N27f8P7Xhnekjgpk+VKGOoQbsiY+hhhtF3YO7twIJ+ULvUGv+GQ2fQEvWxI/THNx5/p/BaspPAQYAqStgiSQwCDoAAAAASUVORK5CYII=":IMAGE_PATH+"/refresh.png",38,38),HoverIcons.prototype.init=function(){this.arrowUp=this.createArrow(this.triangleUp,mxResources.get("plusTooltip")),this.arrowRight=this.createArrow(this.triangleRight,mxResources.get("plusTooltip")),this.arrowDown=this.createArrow(this.triangleDown,mxResources.get("plusTooltip")),this.arrowLeft=this.createArrow(this.triangleLeft,mxResources.get("plusTooltip")),this.elts=[this.arrowUp,this.arrowRight,this.arrowDown,this.arrowLeft],this.repaintHandler=mxUtils.bind(this,function(){this.repaint()}),this.graph.selectionModel.addListener(mxEvent.CHANGE,this.repaintHandler),this.graph.model.addListener(mxEvent.CHANGE,this.repaintHandler),this.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE,this.repaintHandler),this.graph.view.addListener(mxEvent.TRANSLATE,this.repaintHandler),this.graph.view.addListener(mxEvent.SCALE,this.repaintHandler),this.graph.view.addListener(mxEvent.DOWN,this.repaintHandler),this.graph.view.addListener(mxEvent.UP,this.repaintHandler),this.graph.addListener(mxEvent.ROOT,this.repaintHandler),this.graph.addListener(mxEvent.ESCAPE,mxUtils.bind(this,function(){this.mouseDownPoint=null})),mxEvent.addListener(this.graph.container,"mouseleave",mxUtils.bind(this,function(a){null!=a.relatedTarget&&mxEvent.getSource(a)==this.graph.container&&this.setDisplay("none")}));var a=this.graph.click;this.graph.click=mxUtils.bind(this,function(b){a.apply(this.graph,arguments),null==this.currentState||this.graph.isCellSelected(this.currentState.cell)||!mxEvent.isTouchEvent(b.getEvent())||this.graph.model.isVertex(b.getCell())||this.reset()});var b=!1;this.graph.addMouseListener({mouseDown:mxUtils.bind(this,function(a,c){b=!1;var d=c.getEvent();if(this.isResetEvent(d))this.reset();else if(!this.isActive()){var e=this.getState(c.getState());null==e&&mxEvent.isTouchEvent(d)||this.update(e)}this.setDisplay("none")}),mouseMove:mxUtils.bind(this,function(a,c){var d=c.getEvent();this.isResetEvent(d)?this.reset():this.graph.isMouseDown||mxEvent.isTouchEvent(d)||this.update(this.getState(c.getState()),c.getGraphX(),c.getGraphY()),null!=this.graph.connectionHandler&&null!=this.graph.connectionHandler.shape&&(b=!0)}),mouseUp:mxUtils.bind(this,function(a,c){var d=c.getEvent();this.isResetEvent(d)?this.reset():this.isActive()&&null!=this.mouseDownPoint&&Math.abs(c.getGraphX()-this.mouseDownPoint.x)<this.graph.tolerance&&Math.abs(c.getGraphY()-this.mouseDownPoint.y)<this.graph.tolerance?b||this.click(this.currentState,this.getDirection(),c):this.isActive()?1==this.graph.getSelectionCount()&&this.graph.model.isEdge(this.graph.getSelectionCell())?this.reset():this.update(this.getState(this.graph.view.getState(this.graph.getCellAt(c.getGraphX(),c.getGraphY())))):mxEvent.isTouchEvent(d)||null!=this.bbox&&mxUtils.contains(this.bbox,c.getGraphX(),c.getGraphY())?(this.setDisplay(""),this.repaint()):mxEvent.isTouchEvent(d)||this.reset(),b=!1,this.resetActiveArrow()})})},HoverIcons.prototype.isResetEvent=function(a,b){return mxEvent.isAltDown(a)||null==this.activeArrow&&mxEvent.isShiftDown(a)||mxEvent.isMetaDown(a)||mxEvent.isPopupTrigger(a)&&!mxEvent.isControlDown(a)},HoverIcons.prototype.createArrow=function(a,b){var c=null;return mxClient.IS_IE&&!mxClient.IS_SVG?(mxClient.IS_IE6&&"CSS1Compat"!=document.compatMode?(c=document.createElement(mxClient.VML_PREFIX+":image"),c.setAttribute("src",a.src),c.style.borderStyle="none"):(c=document.createElement("div"),c.style.backgroundImage="url("+a.src+")",c.style.backgroundPosition="center",c.style.backgroundRepeat="no-repeat"),c.style.width=a.width+4+"px",c.style.height=a.height+4+"px",c.style.display=mxClient.IS_QUIRKS?"inline":"inline-block"):(c=mxUtils.createImage(a.src),c.style.width=a.width+"px",c.style.height=a.height+"px"),null!=b&&c.setAttribute("title",b),c.style.position="absolute",c.style.cursor="crosshair",mxEvent.addGestureListeners(c,mxUtils.bind(this,function(a){null==this.currentState||this.isResetEvent(a)||(this.mouseDownPoint=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(a),mxEvent.getClientY(a)),this.drag(a,this.mouseDownPoint.x,this.mouseDownPoint.y),this.activeArrow=c,this.setDisplay("none"),mxEvent.consume(a))})),mxEvent.redirectMouseEvents(c,this.graph,this.currentState),mxEvent.addListener(c,"mouseenter",mxUtils.bind(this,function(a){mxEvent.isMouseEvent(a)&&(null!=this.activeArrow&&this.activeArrow!=c&&mxUtils.setOpacity(this.activeArrow,this.inactiveOpacity),this.graph.connectionHandler.constraintHandler.reset(),mxUtils.setOpacity(c,100),this.activeArrow=c)})),mxEvent.addListener(c,"mouseleave",mxUtils.bind(this,function(a){this.graph.isMouseDown||this.resetActiveArrow()})),c},HoverIcons.prototype.resetActiveArrow=function(){null!=this.activeArrow&&(mxUtils.setOpacity(this.activeArrow,this.inactiveOpacity),this.activeArrow=null)},HoverIcons.prototype.getDirection=function(){var a=mxConstants.DIRECTION_EAST;return this.activeArrow==this.arrowUp?a=mxConstants.DIRECTION_NORTH:this.activeArrow==this.arrowDown?a=mxConstants.DIRECTION_SOUTH:this.activeArrow==this.arrowLeft&&(a=mxConstants.DIRECTION_WEST),a},HoverIcons.prototype.visitNodes=function(a){for(var b=0;b<this.elts.length;b++)null!=this.elts[b]&&a(this.elts[b])},HoverIcons.prototype.removeNodes=function(){this.visitNodes(function(a){null!=a.parentNode&&a.parentNode.removeChild(a)})},HoverIcons.prototype.setDisplay=function(a){this.visitNodes(function(b){b.style.display=a})},HoverIcons.prototype.isActive=function(){return null!=this.activeArrow&&null!=this.currentState},HoverIcons.prototype.drag=function(a,b,c){if(this.graph.popupMenuHandler.hideMenu(),this.graph.stopEditing(!1),null!=this.currentState){this.graph.connectionHandler.start(this.currentState,b,c),this.graph.isMouseTrigger=mxEvent.isMouseEvent(a),this.graph.isMouseDown=!0;var d=this.graph.selectionCellsHandler.getHandler(this.currentState.cell);null!=d&&d.setHandlesVisible(!1)}},HoverIcons.prototype.click=function(a,b,c){var d=c.getEvent(),e=c.getGraphX(),f=c.getGraphY(),g=this.graph.view.getState(this.graph.getCellAt(e,f));if(null==g||!this.graph.model.isEdge(g.cell)||mxEvent.isControlDown(d)||g.getVisibleTerminalState(!0)!=a&&g.getVisibleTerminalState(!1)!=a){if(null!=a){var h=this.graph.connectVertex(a.cell,b,this.graph.defaultEdgeLength,d);this.graph.selectCellsForConnectVertex(h,d,this),2==h.length&&this.graph.model.isVertex(h[1])?(this.graph.setSelectionCell(h[1]),mxEvent.isTouchEvent(d)?this.update(this.getState(this.graph.view.getState(h[1]))):this.reset(),this.graph.scrollCellToVisible(h[1])):this.graph.setSelectionCells(h)}}else this.graph.setSelectionCell(g.cell),this.reset();c.consume()},HoverIcons.prototype.reset=function(a){a=null==a||a,a&&null!=this.updateThread&&window.clearTimeout(this.updateThread),this.mouseDownPoint=null,this.currentState=null,this.activeArrow=null,this.removeNodes(),this.bbox=null},HoverIcons.prototype.repaint=function(){if(this.bbox=null,null!=this.currentState){if(this.currentState=this.getState(this.currentState),null!=this.currentState&&this.graph.model.isVertex(this.currentState.cell)&&this.graph.isCellConnectable(this.currentState.cell)){var a=mxRectangle.fromRectangle(this.currentState);null!=this.currentState.shape&&null!=this.currentState.shape.boundingBox&&(a=mxRectangle.fromRectangle(this.currentState.shape.boundingBox)),a.grow(this.graph.tolerance),a.grow(this.arrowSpacing);var b=this.graph.selectionCellsHandler.getHandler(this.currentState.cell);if(null!=b&&(a.x-=b.horizontalOffset/2,a.y-=b.verticalOffset/2,a.width+=b.horizontalOffset,a.height+=b.verticalOffset,null!=b.rotationShape&&null!=b.rotationShape.node&&"hidden"!=b.rotationShape.node.style.visibility&&"none"!=b.rotationShape.node.style.display&&null!=b.rotationShape.boundingBox&&a.add(b.rotationShape.boundingBox)),this.arrowUp.style.left=Math.round(this.currentState.getCenterX()-this.triangleUp.width/2)+"px",this.arrowUp.style.top=Math.round(a.y-this.triangleUp.height)+"px",mxUtils.setOpacity(this.arrowUp,this.inactiveOpacity),this.arrowRight.style.left=Math.round(a.x+a.width)+"px",this.arrowRight.style.top=Math.round(this.currentState.getCenterY()-this.triangleRight.height/2)+"px",mxUtils.setOpacity(this.arrowRight,this.inactiveOpacity),this.arrowDown.style.left=this.arrowUp.style.left,this.arrowDown.style.top=Math.round(a.y+a.height)+"px",mxUtils.setOpacity(this.arrowDown,this.inactiveOpacity),this.arrowLeft.style.left=Math.round(a.x-this.triangleLeft.width)+"px",this.arrowLeft.style.top=this.arrowRight.style.top,mxUtils.setOpacity(this.arrowLeft,this.inactiveOpacity),this.checkCollisions){var c=this.graph.getCellAt(a.x+a.width+this.triangleRight.width/2,this.currentState.getCenterY()),d=this.graph.getCellAt(a.x-this.triangleLeft.width/2,this.currentState.getCenterY()),e=this.graph.getCellAt(this.currentState.getCenterX(),a.y-this.triangleUp.height/2),f=this.graph.getCellAt(this.currentState.getCenterX(),a.y+a.height+this.triangleDown.height/2);null!=c&&c==d&&d==e&&e==f&&(c=null,d=null,e=null,f=null),null==c||this.graph.model.isAncestor(c,this.currentState.cell)?this.arrowRight.style.visibility="visible":this.arrowRight.style.visibility="hidden",null==d||this.graph.model.isAncestor(d,this.currentState.cell)?this.arrowLeft.style.visibility="visible":this.arrowLeft.style.visibility="hidden",null==e||this.graph.model.isAncestor(e,this.currentState.cell)?this.arrowUp.style.visibility="visible":this.arrowUp.style.visibility="hidden",null==f||this.graph.model.isAncestor(f,this.currentState.cell)?this.arrowDown.style.visibility="visible":this.arrowDown.style.visibility="hidden"}else this.arrowLeft.style.visibility="visible",this.arrowRight.style.visibility="visible",this.arrowUp.style.visibility="visible",this.arrowDown.style.visibility="visible";this.graph.tooltipHandler.isEnabled()?(this.arrowLeft.setAttribute("title",mxResources.get("plusTooltip")),this.arrowRight.setAttribute("title",mxResources.get("plusTooltip")),this.arrowUp.setAttribute("title",mxResources.get("plusTooltip")),this.arrowDown.setAttribute("title",mxResources.get("plusTooltip"))):(this.arrowLeft.removeAttribute("title"),this.arrowRight.removeAttribute("title"),this.arrowUp.removeAttribute("title"),this.arrowDown.removeAttribute("title"))}else this.reset();null!=this.currentState&&(this.bbox=this.computeBoundingBox(),null!=this.bbox&&this.bbox.grow(10))}},HoverIcons.prototype.computeBoundingBox=function(){var a=this.graph.model.isEdge(this.currentState.cell)?null:mxRectangle.fromRectangle(this.currentState);return this.visitNodes(function(b){if(null!=b.parentNode){var c=new mxRectangle(b.offsetLeft,b.offsetTop,b.offsetWidth,b.offsetHeight);null==a?a=c:a.add(c)}}),a},HoverIcons.prototype.getState=function(a){if(null!=a){var b=a.cell;if(this.graph.getModel().isVertex(b)&&!this.graph.isCellConnectable(b)){var c=this.graph.getModel().getParent(b);this.graph.getModel().isVertex(c)&&this.graph.isCellConnectable(c)&&(b=c)}(this.graph.isCellLocked(b)||this.graph.model.isEdge(b))&&(b=null),a=this.graph.view.getState(b)}return a},HoverIcons.prototype.update=function(a,b,c){if(this.graph.connectionArrowsEnabled){var d=null;this.prev!=a||this.isActive()?(this.startTime=(new Date).getTime(),this.prev=a,d=0,null!=this.updateThread&&window.clearTimeout(this.updateThread),null!=a&&(this.updateThread=window.setTimeout(mxUtils.bind(this,function(){this.isActive()||this.graph.isMouseDown||this.graph.panningHandler.isActive()||(this.prev=a,this.update(a,b,c))}),this.updateDelay+10))):null!=this.startTime&&(d=(new Date).getTime()-this.startTime),this.setDisplay(""),null!=this.currentState&&this.currentState!=a&&d<this.activationDelay&&null!=this.bbox&&!mxUtils.contains(this.bbox,b,c)?this.reset(!1):(null!=this.currentState||d>this.activationDelay)&&this.currentState!=a&&(d>this.updateDelay&&null!=a||null==this.bbox||null==b||null==c||!mxUtils.contains(this.bbox,b,c))&&(null!=a&&this.graph.isEnabled()?(this.removeNodes(),this.setCurrentState(a),this.repaint(),this.graph.connectionHandler.constraintHandler.currentFocus!=a&&this.graph.connectionHandler.constraintHandler.reset()):this.reset())}else this.reset()},HoverIcons.prototype.setCurrentState=function(a){"eastwest"!=a.style.portConstraint&&(this.graph.container.appendChild(this.arrowUp),this.graph.container.appendChild(this.arrowDown)),this.graph.container.appendChild(this.arrowRight),this.graph.container.appendChild(this.arrowLeft),this.currentState=a},function(){var a=mxGraphView.prototype.updateFloatingTerminalPoint;mxGraphView.prototype.updateFloatingTerminalPoint=function(b,c,d,e){if(null==c||null==b||"1"!=c.style.snapToPoint&&"1"!=b.style.snapToPoint)a.apply(this,arguments);else{c=this.getTerminalPort(b,c,e);var f=this.getNextPoint(b,d,e),g=this.graph.isOrthogonal(b),h=mxUtils.toRadians(Number(c.style[mxConstants.STYLE_ROTATION]||"0")),i=new mxPoint(c.getCenterX(),c.getCenterY());if(0!=h){var j=Math.cos(-h),k=Math.sin(-h);f=mxUtils.getRotatedPoint(f,j,k,i)}var l=parseFloat(b.style[mxConstants.STYLE_PERIMETER_SPACING]||0);l+=parseFloat(b.style[e?mxConstants.STYLE_SOURCE_PERIMETER_SPACING:mxConstants.STYLE_TARGET_PERIMETER_SPACING]||0);var m=this.getPerimeterPoint(c,f,0==h&&g,l);if(0!=h){var j=Math.cos(h),k=Math.sin(h);m=mxUtils.getRotatedPoint(m,j,k,i)}if(null!=c){for(var n=this.graph.getAllConnectionConstraints(c),o=null,p=null,q=0;q<n.length;q++){var r=this.graph.getConnectionPoint(c,n[q]);if(null!=r){var s=(r.x-m.x)*(r.x-m.x)+(r.y-m.y)*(r.y-m.y);(null==p||s<p)&&(o=r,p=s)}}null!=o&&(m=o)}b.setAbsoluteTerminalPoint(m,e)}};var b=mxStencil.prototype.evaluateTextAttribute;mxStencil.prototype.evaluateTextAttribute=function(a,c,d){var e=b.apply(this,arguments),f=a.getAttribute("placeholders");return"1"==f&&null!=d.state&&(e=d.state.view.graph.replacePlaceholders(d.state.cell,e)),e};var c=mxCellRenderer.prototype.createShape;mxCellRenderer.prototype.createShape=function(a){if(null!=a.style&&"undefined"!=typeof pako){var b=mxUtils.getValue(a.style,mxConstants.STYLE_SHAPE,null);if(null!=b&&"stencil("==b.substring(0,8))try{var d=b.substring(8,b.length-1),e=mxUtils.parseXml(a.view.graph.decompress(d));return new mxShape(new mxStencil(e.documentElement))}catch(a){null!=window.console&&console.log("Error in shape: "+a)}}return c.apply(this,arguments)}}(),mxStencilRegistry.libraries={},mxStencilRegistry.dynamicLoading=!0,mxStencilRegistry.packages=[],mxStencilRegistry.getStencil=function(a){var b=mxStencilRegistry.stencils[a];if(null==b&&null==mxCellRenderer.prototype.defaultShapes[a]&&mxStencilRegistry.dynamicLoading){var c=mxStencilRegistry.getBasenameForStencil(a);if(null!=c){var d=mxStencilRegistry.libraries[c];if(null!=d){if(null==mxStencilRegistry.packages[c]){mxStencilRegistry.packages[c]=1;for(var e=0;e<d.length;e++){var f=d[e];if(".xml"==f.toLowerCase().substring(f.length-4,f.length))mxStencilRegistry.loadStencilSet(f,null);else if(".js"==f.toLowerCase().substring(f.length-3,f.length))try{var g=mxUtils.load(f);null!=g&&g.getStatus()>=200&&g.getStatus()<=299&&eval.call(window,g.getText())}catch(a){null!=window.console&&console.log("error in getStencil:",f,a)}}}}else c=c.replace("_-_","_"),mxStencilRegistry.loadStencilSet(STENCIL_PATH+"/"+c+".xml",null);b=mxStencilRegistry.stencils[a]}}return b},mxStencilRegistry.getBasenameForStencil=function(a){var b=null;if(null!=a){var c=a.split(".");if(c.length>0&&"mxgraph"==c[0]){b=c[1];for(var d=2;d<c.length-1;d++)b+="/"+c[d]}}return b},mxStencilRegistry.loadStencilSet=function(a,b,c,d){c=null!=c&&c;var e=mxStencilRegistry.packages[a];if(c||null==e){var f=!1;if(null==e)try{if(d){var g=mxUtils.get(a,mxUtils.bind(this,function(c){c.getStatus()>=200&&c.getStatus()<=299&&(e=c.getXml(),mxStencilRegistry.packages[a]=e,f=!0,null!=e&&null!=e.documentElement&&mxStencilRegistry.parseStencilSet(e.documentElement,b,f))}));return}var g=mxUtils.load(a);e=g.getXml(),mxStencilRegistry.packages[a]=e,f=!0}catch(b){null!=window.console&&console.log("error in loadStencilSet:",a,b)}null!=e&&null!=e.documentElement&&mxStencilRegistry.parseStencilSet(e.documentElement,b,f)}},mxStencilRegistry.parseStencilSets=function(a){for(var b=0;b<a.length;b++)mxStencilRegistry.parseStencilSet(mxUtils.parseXml(a[b]).documentElement)},mxStencilRegistry.parseStencilSet=function(a,b,c){if("stencils"==a.nodeName)for(var d=a.firstChild;null!=d;)"shapes"==d.nodeName&&mxStencilRegistry.parseStencilSet(d,b,c),d=d.nextSibling;else{c=null==c||c;var e=a.firstChild,f="",g=a.getAttribute("name");for(null!=g&&(f=g+".");null!=e;){if(e.nodeType==mxConstants.NODETYPE_ELEMENT&&(g=e.getAttribute("name"),null!=g)){f=f.toLowerCase();var h=g.replace(/ /g,"_");if(c&&mxStencilRegistry.addStencil(f+h.toLowerCase(),new mxStencil(e)),null!=b){var i=e.getAttribute("w"),j=e.getAttribute("h");i=null==i?80:parseInt(i,10),j=null==j?80:parseInt(j,10),b(f,h,g,i,j)}}e=e.nextSibling}}},"undefined"!=typeof mxVertexHandler&&!function(){function l(){var a=document.createElement("div");return a.className="geHint",a.style.whiteSpace="nowrap",a.style.position="absolute",a}mxConstants.HANDLE_FILLCOLOR="#99ccff",mxConstants.HANDLE_STROKECOLOR="#0088cf",mxConstants.VERTEX_SELECTION_COLOR="#00a8ff",mxConstants.OUTLINE_COLOR="#00a8ff",mxConstants.OUTLINE_HANDLE_FILLCOLOR="#99ccff",mxConstants.OUTLINE_HANDLE_STROKECOLOR="#00a8ff",mxConstants.CONNECT_HANDLE_FILLCOLOR="#cee7ff",mxConstants.EDGE_SELECTION_COLOR="#00a8ff",mxConstants.DEFAULT_VALID_COLOR="#00a8ff",mxConstants.LABEL_HANDLE_FILLCOLOR="#cee7ff",mxConstants.GUIDE_COLOR="#0088cf",mxConstants.HIGHLIGHT_OPACITY=30,mxConstants.HIGHLIGHT_SIZE=8,mxEdgeHandler.prototype.snapToTerminals=!0,mxGraphHandler.prototype.guidesEnabled=!0,mxGuide.prototype.isEnabledForEvent=function(a){return!mxEvent.isAltDown(a)};var a=mxConnectionHandler.prototype.isCreateTarget;mxConnectionHandler.prototype.isCreateTarget=function(b){return mxEvent.isControlDown(b)||a.apply(this,arguments)},mxConstraintHandler.prototype.createHighlightShape=function(){var a=new mxEllipse(null,this.highlightColor,this.highlightColor,0);return a.opacity=mxConstants.HIGHLIGHT_OPACITY,a},mxConnectionHandler.prototype.livePreview=!0,mxConnectionHandler.prototype.cursor="crosshair",mxConnectionHandler.prototype.createEdgeState=function(a){var b=this.graph.createCurrentEdgeStyle(),c=this.graph.createEdge(null,null,null,null,null,b),d=new mxCellState(this.graph.view,c,this.graph.getCellStyle(c));for(var e in this.graph.currentEdgeStyle)d.style[e]=this.graph.currentEdgeStyle[e];return d};var b=mxConnectionHandler.prototype.createShape;mxConnectionHandler.prototype.createShape=function(){var a=b.apply(this,arguments);return a.isDashed="1"==this.graph.currentEdgeStyle[mxConstants.STYLE_DASHED],a},mxConnectionHandler.prototype.updatePreview=function(a){};var c=mxConnectionHandler.prototype.createMarker;mxConnectionHandler.prototype.createMarker=function(){var a=c.apply(this,arguments),b=a.getCell;return a.getCell=mxUtils.bind(this,function(a){var c=b.apply(this,arguments);return this.error=null,c}),a},Graph.prototype.defaultEdgeStyle={edgeStyle:"orthogonalEdgeStyle",rounded:"0",html:"1",jettySize:"auto",orthogonalLoop:"1"},Graph.prototype.currentEdgeStyle=Graph.prototype.defaultEdgeStyle,Graph.prototype.currentVertexStyle={},Graph.prototype.createCurrentEdgeStyle=function(){var a="edgeStyle="+(this.currentEdgeStyle.edgeStyle||"none")+";";return null!=this.currentEdgeStyle.shape&&(a+="shape="+this.currentEdgeStyle.shape+";"),null!=this.currentEdgeStyle.curved&&(a+="curved="+this.currentEdgeStyle.curved+";"),null!=this.currentEdgeStyle.rounded&&(a+="rounded="+this.currentEdgeStyle.rounded+";"),null!=this.currentEdgeStyle.comic&&(a+="comic="+this.currentEdgeStyle.comic+";"),"elbowEdgeStyle"==this.currentEdgeStyle.edgeStyle&&null!=this.currentEdgeStyle.elbow&&(a+="elbow="+this.currentEdgeStyle.elbow+";"),a+=null!=this.currentEdgeStyle.html?"html="+this.currentEdgeStyle.html+";":"html=1;"},Graph.prototype.getPagePadding=function(){return new mxPoint(0,0)},Graph.prototype.loadStylesheet=function(){var a=null!=this.themes?this.themes[this.defaultThemeName]:mxStyleRegistry.dynamicLoading?mxUtils.load(STYLE_PATH+"/default.xml").getDocumentElement():null;if(null!=a){var b=new mxCodec(a.ownerDocument);b.decode(a,this.getStylesheet())}},Graph.prototype.getAllConnectionConstraints=function(a,b){if(null!=a){var c=mxUtils.getValue(a.style,"points",null);if(null!=c){var d=[];try{for(var e=JSON.parse(c),f=0;f<e.length;f++){var g=e[f];d.push(new mxConnectionConstraint(new mxPoint(g[0],g[1]),!(g.length>2)||"0"!=g[2]))}}catch(a){}return d}if(null!=a.shape)if(null!=a.shape.stencil){if(null!=a.shape.stencil)return a.shape.stencil.constraints}else if(null!=a.shape.constraints)return a.shape.constraints}return null},Graph.prototype.flipEdge=function(a){if(null!=a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);if(null!=c){var d=mxUtils.getValue(c,mxConstants.STYLE_ELBOW,mxConstants.ELBOW_HORIZONTAL),e=d==mxConstants.ELBOW_HORIZONTAL?mxConstants.ELBOW_VERTICAL:mxConstants.ELBOW_HORIZONTAL;this.setCellStyles(mxConstants.STYLE_ELBOW,e,[a])}}},Graph.prototype.isValidRoot=function(a){for(var b=this.model.getChildCount(a),c=0,d=0;d<b;d++){var e=this.model.getChildAt(a,d);if(this.model.isVertex(e)){var f=this.getCellGeometry(e);null==f||f.relative||c++}}return c>0||this.isContainer(a)},Graph.prototype.isValidDropTarget=function(a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);return"1"!=mxUtils.getValue(c,"part","0")&&(this.isContainer(a)||mxGraph.prototype.isValidDropTarget.apply(this,arguments)&&"0"!=mxUtils.getValue(c,"dropTarget","1"))},Graph.prototype.createGroupCell=function(){var a=mxGraph.prototype.createGroupCell.apply(this,arguments);return a.setStyle("group"),a},Graph.prototype.isExtendParentsOnAdd=function(a){var b=mxGraph.prototype.isExtendParentsOnAdd.apply(this,arguments);if(b&&null!=a&&null!=this.layoutManager){var c=this.model.getParent(a);if(null!=c){var d=this.layoutManager.getLayout(c);null!=d&&d.constructor==mxStackLayout&&(b=!1)}}return b},Graph.prototype.getPreferredSizeForCell=function(a){var b=mxGraph.prototype.getPreferredSizeForCell.apply(this,arguments);return null!=b&&(b.width+=10,b.height+=4,this.gridEnabled&&(b.width=this.snap(b.width),b.height=this.snap(b.height))),b},Graph.prototype.turnShapes=function(a){var b=this.getModel(),c=[];b.beginUpdate();try{for(var d=0;d<a.length;d++){var e=a[d];if(b.isEdge(e)){var f=b.getTerminal(e,!0),g=b.getTerminal(e,!1);b.setTerminal(e,g,!0),b.setTerminal(e,f,!1);var h=b.getGeometry(e);if(null!=h){h=h.clone(),null!=h.points&&h.points.reverse();var i=h.getTerminalPoint(!0),j=h.getTerminalPoint(!1);h.setTerminalPoint(i,!1),h.setTerminalPoint(j,!0),b.setGeometry(e,h);var k=this.view.getState(e),l=this.view.getState(f),m=this.view.getState(g);if(null!=k){var n=null!=l?this.getConnectionConstraint(k,l,!0):null,o=null!=m?this.getConnectionConstraint(k,m,!1):null;this.setConnectionConstraint(e,f,!0,o),this.setConnectionConstraint(e,g,!1,n)}c.push(e)}}else if(b.isVertex(e)){var h=this.getCellGeometry(e);if(null!=h){
  h=h.clone(),h.x+=h.width/2-h.height/2,h.y+=h.height/2-h.width/2;var p=h.width;h.width=h.height,h.height=p,b.setGeometry(e,h);var q=this.view.getState(e);if(null!=q){var r=q.style[mxConstants.STYLE_DIRECTION]||"east";"east"==r?r="south":"south"==r?r="west":"west"==r?r="north":"north"==r&&(r="east"),this.setCellStyles(mxConstants.STYLE_DIRECTION,r,[e])}c.push(e)}}}}finally{b.endUpdate()}return c},Graph.prototype.processChange=function(a){if(mxGraph.prototype.processChange.apply(this,arguments),a instanceof mxValueChange&&null!=a.cell.value&&"object"==typeof a.cell.value){var b=this.model.getDescendants(a.cell);if(b.length>0)for(var c=0;c<b.length;c++)this.isReplacePlaceholders(b[c])&&this.view.invalidate(b[c],!1,!1)}},Graph.prototype.cellLabelChanged=function(a,b,c){b=this.zapGremlins(b),this.model.beginUpdate();try{if(null!=a.value&&"object"==typeof a.value){if(this.isReplacePlaceholders(a)&&null!=a.getAttribute("placeholder"))for(var d=a.getAttribute("placeholder"),e=a;null!=e;){if(e==this.model.getRoot()||null!=e.value&&"object"==typeof e.value&&e.hasAttribute(d)){this.setAttributeForCell(e,d,b);break}e=this.model.getParent(e)}var f=a.value.cloneNode(!0);f.setAttribute("label",b),b=f}mxGraph.prototype.cellLabelChanged.apply(this,arguments)}finally{this.model.endUpdate()}},Graph.prototype.removeCellsAfterUngroup=function(a){for(var b=[],c=0;c<a.length;c++)if(this.isCellDeletable(a[c])){var d=this.view.getState(a[c]);if(null!=d){var e=mxUtils.getValue(d.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE),f=mxUtils.getValue(d.style,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE);e==mxConstants.NONE&&f==mxConstants.NONE&&b.push(a[c])}}a=b,mxGraph.prototype.removeCellsAfterUngroup.apply(this,arguments)},Graph.prototype.setLinkForCell=function(a,b){this.setAttributeForCell(a,"link",b)},Graph.prototype.setTooltipForCell=function(a,b){this.setAttributeForCell(a,"tooltip",b)},Graph.prototype.setAttributeForCell=function(a,b,c){var d=null;if(null!=a.value&&"object"==typeof a.value)d=a.value.cloneNode(!0);else{var e=mxUtils.createXmlDocument();d=e.createElement("UserObject"),d.setAttribute("label",a.value||"")}null!=c&&c.length>0?d.setAttribute(b,c):d.removeAttribute(b),this.model.setValue(a,d)},Graph.prototype.getDropTarget=function(a,b,c,d){this.getModel();if(mxEvent.isAltDown(b))return null;for(var f=0;f<a.length;f++)if(this.model.isEdge(this.model.getParent(a[f])))return null;return mxGraph.prototype.getDropTarget.apply(this,arguments)},Graph.prototype.click=function(a){mxGraph.prototype.click.call(this,a),this.firstClickState=a.getState(),this.firstClickSource=a.getSource()},Graph.prototype.dblClick=function(a,b){if(this.isEnabled()){var c=mxUtils.convertPoint(this.container,mxEvent.getClientX(a),mxEvent.getClientY(a));if(null!=a&&!this.model.isVertex(b)){var d=this.model.isEdge(b)?this.view.getState(b):null,e=mxEvent.getSource(a);this.firstClickState==d&&this.firstClickSource==e&&(null!=d&&null!=d.text&&null!=d.text.node&&(mxUtils.contains(d.text.boundingBox,c.x,c.y)||mxUtils.isAncestorNode(d.text.node,mxEvent.getSource(a)))||(null==d&&!this.isCellLocked(this.getDefaultParent())||null!=d&&!this.isCellLocked(d.cell))&&(null!=d||mxClient.IS_VML&&e==this.view.getCanvas()||mxClient.IS_SVG&&e==this.view.getCanvas().ownerSVGElement)&&(b=this.addText(c.x,c.y,d)))}mxGraph.prototype.dblClick.call(this,a,b)}},Graph.prototype.getInsertPoint=function(){var a=this.getGridSize(),b=this.container.scrollLeft/this.view.scale-this.view.translate.x,c=this.container.scrollTop/this.view.scale-this.view.translate.y;if(this.pageVisible){var d=this.getPageLayout(),e=this.getPageSize();b=Math.max(b,d.x*e.width),c=Math.max(c,d.y*e.height)}return new mxPoint(this.snap(b+a),this.snap(c+a))},Graph.prototype.getFreeInsertPoint=function(){var a=this.view,b=this.getGraphBounds(),c=this.getInsertPoint(),d=this.snap(Math.round(Math.max(c.x,b.x/a.scale-a.translate.x+(0==b.width?this.gridSize:0)))),e=this.snap(Math.round(Math.max(c.y,(b.y+b.height)/a.scale-a.translate.y+(0==b.height?1:2)*this.gridSize)));return new mxPoint(d,e)},Graph.prototype.isMouseInsertPoint=function(){return!1},Graph.prototype.addText=function(a,b,c){var d=new mxCell;if(d.value="Text",d.style="text;html=1;resizable=0;points=[];",d.geometry=new mxGeometry(0,0,0,0),d.vertex=!0,null!=c){d.style+="align=center;verticalAlign=middle;labelBackgroundColor=#ffffff;",d.geometry.relative=!0,d.connectable=!1;var e=this.view.getRelativePoint(c,a,b);d.geometry.x=Math.round(1e4*e.x)/1e4,d.geometry.y=Math.round(e.y),d.geometry.offset=new mxPoint(0,0),e=this.view.getPoint(c,d.geometry);var f=this.view.scale;d.geometry.offset=new mxPoint(Math.round((a-e.x)/f),Math.round((b-e.y)/f))}else{d.style+="autosize=1;align=left;verticalAlign=top;spacingTop=-4;";var g=this.view.translate;d.geometry.width=40,d.geometry.height=20,d.geometry.x=Math.round(a/this.view.scale)-g.x,d.geometry.y=Math.round(b/this.view.scale)-g.y}this.getModel().beginUpdate();try{this.addCells([d],null!=c?c.cell:null),this.fireEvent(new mxEventObject("textInserted","cells",[d])),this.autoSizeCell(d)}finally{this.getModel().endUpdate()}return d},Graph.prototype.getAbsoluteUrl=function(a){return null!=a&&this.isRelativeUrl(a)&&(a="#"==a.charAt(0)?this.baseUrl+a:"/"==a.charAt(0)?this.domainUrl+a:this.domainPathUrl+a),a},Graph.prototype.isExternalProtocol=function(a){return"mailto:"===a.substring(0,7)},Graph.prototype.isBlankLink=function(a){return!this.isExternalProtocol(a)&&("blank"===this.linkPolicy||"self"!==this.linkPolicy&&!this.isRelativeUrl(a)&&a.substring(0,this.domainUrl.length)!==this.domainUrl)},Graph.prototype.isRelativeUrl=function(a){return null!=a&&!this.absoluteUrlPattern.test(a)&&"data:"!==a.substring(0,5)&&!this.isExternalProtocol(a)},Graph.prototype.addClickHandler=function(a,b,c){var d=mxUtils.bind(this,function(){var a=this.container.getElementsByTagName("a");if(null!=a)for(var c=0;c<a.length;c++){var d=this.getAbsoluteUrl(a[c].getAttribute("href"));null!=d&&(a[c].setAttribute("href",d),null!=b&&mxEvent.addListener(a[c],"click",b))}});this.model.addListener(mxEvent.CHANGE,d),d();var e=this.container.style.cursor,f=this.getTolerance(),g=this,h={currentState:null,currentLink:null,highlight:null!=a&&""!=a&&a!=mxConstants.NONE?new mxCellHighlight(g,a,4):null,startX:0,startY:0,scrollLeft:0,scrollTop:0,updateCurrentState:function(a){var b=g.view.getState(a.getCell());b!=this.currentState&&(null!=this.currentState&&this.clear(),this.currentState=b,null!=this.currentState&&this.activate(this.currentState))},mouseDown:function(a,b){this.startX=b.getGraphX(),this.startY=b.getGraphY(),this.scrollLeft=g.container.scrollLeft,this.scrollTop=g.container.scrollTop,null==this.currentLink&&"auto"==g.container.style.overflow&&(g.container.style.cursor="move"),this.updateCurrentState(b)},mouseMove:function(a,b){if(g.isMouseDown){if(null!=this.currentLink){var c=Math.abs(this.startX-b.getGraphX()),d=Math.abs(this.startY-b.getGraphY());(c>f||d>f)&&this.clear()}}else if("a"==b.getSource().nodeName.toLowerCase())this.clear();else{if(null!=this.currentState&&(b.getState()==this.currentState||null==b.getState())&&g.intersects(this.currentState,b.getGraphX(),b.getGraphY()))return;this.updateCurrentState(b)}},mouseUp:function(a,d){var e=d.getSource();if("a"!=e.nodeName.toLowerCase()&&!d.isConsumed()&&(null==d.getState()||!d.isSource(d.getState().control))&&(mxEvent.isLeftMouseButton(d.getEvent())||mxEvent.isTouchEvent(d.getEvent())))if(null!=this.currentLink){var h=g.isBlankLink(this.currentLink);h||null==b||b(d.getEvent());var i=h?g.linkTarget:"_top";"_self"==i&&window!=window.top?window.location.href=this.currentLink:window.open(this.currentLink,i),d.consume()}else null!=c&&!d.isConsumed()&&Math.abs(this.scrollLeft-g.container.scrollLeft)<f&&Math.abs(this.scrollTop-g.container.scrollTop)<f&&Math.abs(this.startX-d.getGraphX())<f&&Math.abs(this.startY-d.getGraphY())<f&&c(d.getEvent());this.clear()},activate:function(a){this.currentLink=g.getAbsoluteUrl(g.getLinkForCell(a.cell)),null!=this.currentLink&&(g.container.style.cursor="pointer",null!=this.highlight&&this.highlight.highlight(a))},clear:function(){null!=g.container&&(g.container.style.cursor=e),this.currentState=null,this.currentLink=null,null!=this.highlight&&this.highlight.hide()}};g.click=function(a){},g.addMouseListener(h),mxEvent.addListener(document,"mouseleave",function(a){h.clear()})},Graph.prototype.duplicateCells=function(a,b){a=null!=a?a:this.getSelectionCells(),b=null==b||b,a=this.model.getTopmostCells(a);var c=this.getModel(),d=this.gridSize,e=[];c.beginUpdate();try{for(var f=this.cloneCells(a,!1),g=0;g<a.length;g++){var h=c.getParent(a[g]),i=this.moveCells([f[g]],d,d,!1,h)[0];if(e.push(i),b)c.add(h,f[g]);else{var j=h.getIndex(a[g]);c.add(h,f[g],j+1)}}}finally{c.endUpdate()}return e},Graph.prototype.insertImage=function(a,b,c){if(null!=a){for(var d=this.cellEditor.textarea.getElementsByTagName("img"),e=[],f=0;f<d.length;f++)e.push(d[f]);document.execCommand("insertimage",!1,a);var g=this.cellEditor.textarea.getElementsByTagName("img");if(g.length==e.length+1)for(var f=g.length-1;f>=0;f--)if(0==f||g[f]!=e[f-1]){g[f].setAttribute("width",b),g[f].setAttribute("height",c);break}}},Graph.prototype.insertLink=function(a){0==a.length?document.execCommand("unlink",!1):document.execCommand("createlink",!1,mxUtils.trim(a))},Graph.prototype.isCellResizable=function(a){var b=mxGraph.prototype.isCellResizable.apply(this,arguments),c=this.view.getState(a),d=null!=c?c.style:this.getCellStyle(a);return b||"0"!=mxUtils.getValue(d,mxConstants.STYLE_RESIZABLE,"1")&&"wrap"==d[mxConstants.STYLE_WHITE_SPACE]},Graph.prototype.distributeCells=function(a,b){if(null==b&&(b=this.getSelectionCells()),null!=b&&b.length>1){for(var c=[],d=null,e=null,f=0;f<b.length;f++)if(this.getModel().isVertex(b[f])){var g=this.view.getState(b[f]);if(null!=g){var h=a?g.getCenterX():g.getCenterY();d=null!=d?Math.max(d,h):h,e=null!=e?Math.min(e,h):h,c.push(g)}}if(c.length>2){c.sort(function(b,c){return a?b.x-c.x:b.y-c.y});var i=this.view.translate,j=this.view.scale;e=e/j-(a?i.x:i.y),d=d/j-(a?i.x:i.y),this.getModel().beginUpdate();try{for(var k=(d-e)/(c.length-1),l=e,f=1;f<c.length-1;f++){var m=this.getCellGeometry(c[f].cell);l+=k,null!=m&&(m=m.clone(),a?m.x=Math.round(l-m.width/2):m.y=Math.round(l-m.height/2),this.getModel().setGeometry(c[f].cell,m))}}finally{this.getModel().endUpdate()}}}return b},Graph.prototype.isCloneEvent=function(a){return mxClient.IS_MAC&&mxEvent.isMetaDown(a)||mxEvent.isControlDown(a)},Graph.prototype.encodeCells=function(a){for(var b=this.cloneCells(a),c=0;c<b.length;c++){var d=this.view.getState(a[c]);if(null!=d){var e=this.getCellGeometry(b[c]);null!=e&&e.relative&&(e.relative=!1,e.x=d.x/d.view.scale-d.view.translate.x,e.y=d.y/d.view.scale-d.view.translate.y)}}for(var f=new mxCodec,g=new mxGraphModel,h=g.getChildAt(g.getRoot(),0),c=0;c<a.length;c++)g.add(h,b[c]);return f.encode(g)},Graph.prototype.createSvgImageExport=function(){var a=new mxImageExport;return a.getLinkForCellState=mxUtils.bind(this,function(a,b){return this.getLinkForCell(a.cell)}),a},Graph.prototype.getSvg=function(a,b,c,d,e,f,g){b=null!=b?b:1,c=null!=c?c:0,e=null==e||e,f=null==f||f,g=null==g||g;var h=f||d?this.getGraphBounds():this.getBoundingBox(this.getSelectionCells());if(null==h)throw Error(mxResources.get("drawingEmpty"));var i=this.view.scale,j=mxUtils.createXmlDocument(),k=null!=j.createElementNS?j.createElementNS(mxConstants.NS_SVG,"svg"):j.createElement("svg");null!=a&&(null!=k.style?k.style.backgroundColor=a:k.setAttribute("style","background-color:"+a)),null==j.createElementNS?(k.setAttribute("xmlns",mxConstants.NS_SVG),k.setAttribute("xmlns:xlink",mxConstants.NS_XLINK)):k.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink",mxConstants.NS_XLINK);var l=b/i;k.setAttribute("width",Math.ceil(h.width*l)+2*c+"px"),k.setAttribute("height",Math.ceil(h.height*l)+2*c+"px"),k.setAttribute("version","1.1");var m=k;if(e){var n=null!=j.createElementNS?j.createElementNS(mxConstants.NS_SVG,"g"):j.createElement("g");n.setAttribute("transform","translate(0.5,0.5)"),k.appendChild(n),j.appendChild(k),m=n}else j.appendChild(k);var o=this.createSvgCanvas(m);o.foOffset=e?-.5:0,o.textOffset=e?-.5:0,o.imageOffset=e?-.5:0,o.translate(Math.floor((c/b-h.x)/i),Math.floor((c/b-h.y)/i));var p=o.createAlternateContent;o.createAlternateContent=function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this.state;if(null!=this.foAltText&&(0==d||0!=n.fontSize&&f.length<5*d/n.fontSize)){var o=this.createElement("text");return o.setAttribute("x",Math.round(d/2)),o.setAttribute("y",Math.round((e+n.fontSize)/2)),o.setAttribute("fill",n.fontColor||"black"),o.setAttribute("text-anchor","middle"),o.setAttribute("font-size",Math.round(n.fontSize)+"px"),o.setAttribute("font-family",n.fontFamily),(n.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&o.setAttribute("font-weight","bold"),(n.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&o.setAttribute("font-style","italic"),(n.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&o.setAttribute("text-decoration","underline"),mxUtils.write(o,f),o}return p.apply(this,arguments)};var q=this.backgroundImage;if(null!=q){var r=i/b,s=this.view.translate,t=new mxRectangle(s.x*r,s.y*r,q.width*r,q.height*r);mxUtils.intersects(h,t)&&o.image(s.x,s.y,q.width,q.height,q.src,!0)}o.scale(l),o.textEnabled=g;var u=this.createSvgImageExport(),v=u.drawCellState;return u.drawCellState=function(a,b){(f||a.view.graph.isCellSelected(a.cell))&&v.apply(this,arguments)},u.drawState(this.getView().getState(this.model.root),o),k},Graph.prototype.createSvgCanvas=function(a){return new mxSvgCanvas2D(a)},Graph.prototype.getSelectedElement=function(){var a=null;if(window.getSelection){var b=window.getSelection();if(b.getRangeAt&&b.rangeCount){var c=b.getRangeAt(0);a=c.commonAncestorContainer}}else document.selection&&(a=document.selection.createRange().parentElement());return a},Graph.prototype.getParentByName=function(a,b,c){for(;null!=a;){if(a.nodeName==b)return a;if(a==c)return null;a=a.parentNode}return a},Graph.prototype.selectNode=function(a){var b=null;if(window.getSelection){if(b=window.getSelection(),b.getRangeAt&&b.rangeCount){var c=document.createRange();c.selectNode(a),b.removeAllRanges(),b.addRange(c)}}else if((b=document.selection)&&"Control"!=b.type){var d=b.createRange();d.collapse(!0);var c=b.createRange();c.setEndPoint("StartToStart",d),c.select()}},Graph.prototype.insertRow=function(a,b){for(var c=a.tBodies[0],d=c.rows.length>0?c.rows[0].cells.length:1,e=c.insertRow(b),f=0;f<d;f++)mxUtils.br(e.insertCell(-1));return e.cells[0]},Graph.prototype.deleteRow=function(a,b){a.tBodies[0].deleteRow(b)},Graph.prototype.insertColumn=function(a,b){var c=a.tHead;if(null!=c)for(var d=0;d<c.rows.length;d++){var e=document.createElement("th");c.rows[d].appendChild(e),mxUtils.br(e)}for(var f=a.tBodies[0],g=0;g<f.rows.length;g++){var h=f.rows[g].insertCell(b);mxUtils.br(h)}return f.rows[0].cells[b>=0?b:f.rows[0].cells.length-1]},Graph.prototype.deleteColumn=function(a,b){if(b>=0)for(var c=a.tBodies[0],d=c.rows,e=0;e<d.length;e++)d[e].cells.length>b&&d[e].deleteCell(b)},Graph.prototype.pasteHtmlAtCaret=function(a){var b,c;if(window.getSelection){if(b=window.getSelection(),b.getRangeAt&&b.rangeCount){c=b.getRangeAt(0),c.deleteContents();var d=document.createElement("div");d.innerHTML=a;for(var f,e=document.createDocumentFragment();f=d.firstChild;)lastNode=e.appendChild(f);c.insertNode(e)}}else(b=document.selection)&&"Control"!=b.type&&b.createRange().pasteHTML(a)},Graph.prototype.initTouch=function(){this.connectionHandler.marker.isEnabled=function(){return null!=this.graph.connectionHandler.first},this.addListener(mxEvent.START_EDITING,function(a,b){this.popupMenuHandler.hideMenu()});var a=this.updateMouseEvent;this.updateMouseEvent=function(b){if(b=a.apply(this,arguments),mxEvent.isTouchEvent(b.getEvent())&&null==b.getState()){var c=this.getCellAt(b.graphX,b.graphY);null!=c&&this.isSwimlane(c)&&this.hitsSwimlaneContent(c,b.graphX,b.graphY)?c=null:(b.state=this.view.getState(c),null!=b.state&&null!=b.state.shape&&(this.container.style.cursor=b.state.shape.node.style.cursor))}return null==b.getState()&&this.isEnabled()&&(this.container.style.cursor="default"),b};var b=!1,c=!1,d=!1,e=this.fireMouseEvent;this.fireMouseEvent=function(a,f,g){a==mxEvent.MOUSE_DOWN&&(f=this.updateMouseEvent(f),b=this.isCellSelected(f.getCell()),c=this.isSelectionEmpty(),d=this.popupMenuHandler.isMenuShowing()),e.apply(this,arguments)},this.popupMenuHandler.mouseUp=mxUtils.bind(this,function(a,e){this.popupMenuHandler.popupTrigger=!this.isEditing()&&this.isEnabled()&&(null==e.getState()||!e.isSource(e.getState().control))&&(this.popupMenuHandler.popupTrigger||!d&&!mxEvent.isMouseEvent(e.getEvent())&&(c&&null==e.getCell()&&this.isSelectionEmpty()||b&&this.isCellSelected(e.getCell()))),mxPopupMenuHandler.prototype.mouseUp.apply(this.popupMenuHandler,arguments)})},mxCellEditor.prototype.isContentEditing=function(){var a=this.graph.view.getState(this.editingCell);return null!=a&&1==a.style.html},mxCellEditor.prototype.saveSelection=function(){if(window.getSelection){if(sel=window.getSelection(),sel.getRangeAt&&sel.rangeCount){for(var a=[],b=0,c=sel.rangeCount;b<c;++b)a.push(sel.getRangeAt(b));return a}}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},mxCellEditor.prototype.restoreSelection=function(a){try{if(a)if(window.getSelection){sel=window.getSelection(),sel.removeAllRanges();for(var b=0,c=a.length;b<c;++b)sel.addRange(a[b])}else document.selection&&a.select&&a.select()}catch(a){}};var d=mxCellRenderer.prototype.initializeLabel;mxCellRenderer.prototype.initializeLabel=function(a){null!=a.text&&(a.text.replaceLinefeeds="0"!=mxUtils.getValue(a.style,"nl2Br","1")),d.apply(this,arguments)};var e=mxConstraintHandler.prototype.update;mxConstraintHandler.prototype.update=function(a,b){this.isKeepFocusEvent(a)||!mxEvent.isAltDown(a.getEvent())?e.apply(this,arguments):this.reset()},mxGuide.prototype.createGuideShape=function(a){var b=new mxPolyline([],mxConstants.GUIDE_COLOR,mxConstants.GUIDE_STROKEWIDTH);return b},mxCellEditor.prototype.escapeCancelsEditing=!1;var f=mxCellEditor.prototype.startEditing;mxCellEditor.prototype.startEditing=function(a,b){f.apply(this,arguments);var c=this.graph.view.getState(a);null!=c&&1==c.style.html?this.textarea.className="mxCellEditor geContentEditable":this.textarea.className="mxCellEditor mxPlainTextEditor",this.codeViewMode=!1,this.switchSelectionState=null,this.graph.setSelectionCell(a);var d=this.graph.getModel().getParent(a),e=this.graph.getCellGeometry(a);this.graph.getModel().isEdge(d)&&null!=e&&e.relative||this.graph.getModel().isEdge(a)?mxClient.IS_QUIRKS?this.textarea.style.border="gray dotted 1px":mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_FF&&mxClient.IS_WIN?this.textarea.style.outline="gray dotted 1px":this.textarea.style.outline="":mxClient.IS_QUIRKS&&(this.textarea.style.outline="none",this.textarea.style.border="")};var g=mxCellEditor.prototype.installListeners;mxCellEditor.prototype.installListeners=function(a){function b(a,c){c.originalNode=a,a=a.firstChild;for(var d=c.firstChild;null!=a&&null!=d;)b(a,d),a=a.nextSibling,d=d.nextSibling;return c}function c(a,b){if(null!=a)if(b.originalNode!=a)d(a);else for(a=a.firstChild,b=b.firstChild;null!=a;){var e=a.nextSibling;null==b?d(a):(c(a,b),b=b.nextSibling),a=e}}function d(a){for(var b=a.firstChild;null!=b;){var c=b.nextSibling;d(b),b=c}1==a.nodeType&&("BR"===a.nodeName||null!=a.firstChild)||3==a.nodeType&&0!=mxUtils.trim(mxUtils.getTextContent(a)).length?(3==a.nodeType&&mxUtils.setTextContent(a,mxUtils.getTextContent(a).replace(/\n|\r/g,"")),1==a.nodeType&&(a.removeAttribute("style"),a.removeAttribute("class"),a.removeAttribute("width"),a.removeAttribute("cellpadding"),a.removeAttribute("cellspacing"),a.removeAttribute("border"))):a.parentNode.removeChild(a)}g.apply(this,arguments),mxClient.IS_QUIRKS||7===document.documentMode||8===document.documentMode||mxEvent.addListener(this.textarea,"paste",mxUtils.bind(this,function(a){var d=b(this.textarea,this.textarea.cloneNode(!0));window.setTimeout(mxUtils.bind(this,function(){c(this.textarea,d)}),0)}))},mxCellEditor.prototype.toggleViewMode=function(){var a=this.graph.view.getState(this.editingCell),b=null!=a&&"0"!=mxUtils.getValue(a.style,"nl2Br","1"),c=this.saveSelection();if(this.codeViewMode){var d=mxUtils.extractTextWithWhitespace(this.textarea.childNodes);d.length>0&&"\n"==d.charAt(d.length-1)&&(d=d.substring(0,d.length-1)),d=this.graph.sanitizeHtml(b?d.replace(/\n/g,"<br/>"):d,!0),this.textarea.className="mxCellEditor geContentEditable";var e=mxUtils.getValue(a.style,mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE),f=mxUtils.getValue(a.style,mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY),g=mxUtils.getValue(a.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_LEFT),h=(mxUtils.getValue(a.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD,i=(mxUtils.getValue(a.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC,j=(mxUtils.getValue(a.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE;this.textarea.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?Math.round(e*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT,this.textarea.style.fontSize=Math.round(e)+"px",this.textarea.style.textDecoration=j?"underline":"",this.textarea.style.fontWeight=h?"bold":"normal",this.textarea.style.fontStyle=i?"italic":"",this.textarea.style.fontFamily=f,this.textarea.style.textAlign=g,this.textarea.style.padding="0px",this.textarea.innerHTML!=d&&(this.textarea.innerHTML=d,0==this.textarea.innerHTML.length&&(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=this.textarea.innerHTML.length>0)),this.codeViewMode=!1}else{this.clearOnChange&&this.textarea.innerHTML==this.getEmptyLabelText()&&(this.clearOnChange=!1,this.textarea.innerHTML="");var d=mxUtils.htmlEntities(this.textarea.innerHTML);mxClient.IS_QUIRKS||8==document.documentMode||(d=mxUtils.replaceTrailingNewlines(d,"<div><br></div>")),d=this.graph.sanitizeHtml(b?d.replace(/\n/g,"").replace(/&lt;br\s*.?&gt;/g,"<br>"):d,!0),this.textarea.className="mxCellEditor mxPlainTextEditor";var e=mxConstants.DEFAULT_FONTSIZE;this.textarea.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?Math.round(e*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT,this.textarea.style.fontSize=Math.round(e)+"px",this.textarea.style.textDecoration="",this.textarea.style.fontWeight="normal",this.textarea.style.fontStyle="",this.textarea.style.fontFamily=mxConstants.DEFAULT_FONTFAMILY,this.textarea.style.textAlign="left",this.textarea.style.padding="2px",this.textarea.innerHTML!=d&&(this.textarea.innerHTML=d),this.codeViewMode=!0}this.textarea.focus(),null!=this.switchSelectionState&&this.restoreSelection(this.switchSelectionState),this.switchSelectionState=c,this.resize()};var h=mxCellEditor.prototype.resize;mxCellEditor.prototype.resize=function(a,b){if(null!=this.textarea){var a=this.graph.getView().getState(this.editingCell);if(this.codeViewMode&&null!=a){var c=a.view.scale;if(this.bounds=mxRectangle.fromRectangle(a),0==this.bounds.width&&0==this.bounds.height){this.bounds.width=160*c,this.bounds.height=60*c;var d=null!=a.text?a.text.margin:null;null==d&&(d=mxUtils.getAlignmentAsPoint(mxUtils.getValue(a.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),mxUtils.getValue(a.style,mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE))),this.bounds.x+=d.x*this.bounds.width,this.bounds.y+=d.y*this.bounds.height}this.textarea.style.width=Math.round((this.bounds.width-4)/c)+"px",this.textarea.style.height=Math.round((this.bounds.height-4)/c)+"px",this.textarea.style.overflow="auto",this.textarea.clientHeight<this.textarea.offsetHeight&&(this.textarea.style.height=Math.round(this.bounds.height/c)+(this.textarea.offsetHeight-this.textarea.clientHeight)+"px",this.bounds.height=parseInt(this.textarea.style.height)*c),this.textarea.clientWidth<this.textarea.offsetWidth&&(this.textarea.style.width=Math.round(this.bounds.width/c)+(this.textarea.offsetWidth-this.textarea.clientWidth)+"px",this.bounds.width=parseInt(this.textarea.style.width)*c),this.textarea.style.left=Math.round(this.bounds.x)+"px",this.textarea.style.top=Math.round(this.bounds.y)+"px",mxClient.IS_VML?this.textarea.style.zoom=c:mxUtils.setPrefixedStyle(this.textarea.style,"transform","scale("+c+","+c+")")}else this.textarea.style.height="",this.textarea.style.overflow="",h.apply(this,arguments)}},mxCellEditorGetInitialValue=mxCellEditor.prototype.getInitialValue,mxCellEditor.prototype.getInitialValue=function(a,b){if("0"==mxUtils.getValue(a.style,"html","0"))return mxCellEditorGetInitialValue.apply(this,arguments);var c=this.graph.getEditingValue(a.cell,b);return"1"==mxUtils.getValue(a.style,"nl2Br","1")&&(c=c.replace(/\n/g,"<br/>")),c=this.graph.sanitizeHtml(c,!0)},mxCellEditorGetCurrentValue=mxCellEditor.prototype.getCurrentValue,mxCellEditor.prototype.getCurrentValue=function(a){if("0"==mxUtils.getValue(a.style,"html","0"))return mxCellEditorGetCurrentValue.apply(this,arguments);var b=this.graph.sanitizeHtml(this.textarea.innerHTML,!0);return b="1"==mxUtils.getValue(a.style,"nl2Br","1")?b.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>"):b.replace(/\r\n/g,"").replace(/\n/g,"")};var i=mxCellEditor.prototype.stopEditing;mxCellEditor.prototype.stopEditing=function(a){this.codeViewMode&&this.toggleViewMode(),i.apply(this,arguments);try{this.graph.container.focus()}catch(a){}};var j=mxCellEditor.prototype.applyValue;mxCellEditor.prototype.applyValue=function(a,b){this.graph.getModel().beginUpdate();try{if(j.apply(this,arguments),this.graph.isCellDeletable(a.cell)){var c=mxUtils.getValue(a.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE),d=mxUtils.getValue(a.style,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE);""==mxUtils.trim(b||"")&&c==mxConstants.NONE&&d==mxConstants.NONE&&this.graph.removeCells([a.cell],!1)}}finally{this.graph.getModel().endUpdate()}},mxCellEditor.prototype.getBackgroundColor=function(a){var b=null;if(this.graph.getModel().isEdge(a.cell)||this.graph.getModel().isEdge(this.graph.getModel().getParent(a.cell))){var b=mxUtils.getValue(a.style,mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,null);b==mxConstants.NONE&&(b=null)}return b},mxCellEditor.prototype.getMinimumSize=function(a){var b=this.graph.getView().scale;return new mxRectangle(0,0,null==a.text?30:a.text.size*b+20,30)};var k=mxGraphHandler.prototype.moveCells;mxGraphHandler.prototype.moveCells=function(a,b,c,d,e,f){mxEvent.isAltDown(f)&&(e=null),k.apply(this,arguments)},mxGraphHandler.prototype.updateHint=function(a){if(null!=this.shape){null==this.hint&&(this.hint=l(),this.graph.container.appendChild(this.hint));var b=this.graph.view.translate,c=this.graph.view.scale,d=this.roundLength((this.bounds.x+this.currentDx)/c-b.x),e=this.roundLength((this.bounds.y+this.currentDy)/c-b.y);this.hint.innerHTML=d+", "+e,this.hint.style.left=this.shape.bounds.x+Math.round((this.shape.bounds.width-this.hint.clientWidth)/2)+"px",this.hint.style.top=this.shape.bounds.y+this.shape.bounds.height+12+"px"}},mxGraphHandler.prototype.removeHint=function(){null!=this.hint&&(this.hint.parentNode.removeChild(this.hint),this.hint=null)},mxVertexHandler.prototype.isRecursiveResize=function(a,b){return!this.graph.isSwimlane(a.cell)&&this.graph.model.getChildCount(a.cell)>0&&!mxEvent.isControlDown(b.getEvent())&&!this.graph.isCellCollapsed(a.cell)&&"1"==mxUtils.getValue(a.style,"recursiveResize","1")&&null==mxUtils.getValue(a.style,"childLayout",null)},mxVertexHandler.prototype.isCenteredEvent=function(a,b){return!(!this.graph.isSwimlane(a.cell)&&this.graph.model.getChildCount(a.cell)>0&&!this.graph.isCellCollapsed(a.cell)&&"1"==mxUtils.getValue(a.style,"recursiveResize","1")&&null==mxUtils.getValue(a.style,"childLayout",null))&&mxEvent.isControlDown(b.getEvent())||mxEvent.isMetaDown(b.getEvent())};var m=mxVertexHandler.prototype.getHandlePadding;if(mxVertexHandler.prototype.getHandlePadding=function(){var a=new mxPoint(0,0),b=this.tolerance;return this.graph.cellEditor.getEditingCell()==this.state.cell&&null!=this.sizers&&this.sizers.length>0&&null!=this.sizers[0]?(b/=2,a.x=this.sizers[0].bounds.width+b,a.y=this.sizers[0].bounds.height+b):a=m.apply(this,arguments),a},mxVertexHandler.prototype.updateHint=function(a){if(this.index!=mxEvent.LABEL_HANDLE){if(null==this.hint&&(this.hint=l(),this.state.view.graph.container.appendChild(this.hint)),this.index==mxEvent.ROTATION_HANDLE)this.hint.innerHTML=this.currentAlpha+"&deg;";else{var b=this.state.view.scale;this.hint.innerHTML=this.roundLength(this.bounds.width/b)+" x "+this.roundLength(this.bounds.height/b)}var c=null!=this.currentAlpha?this.currentAlpha:this.state.style[mxConstants.STYLE_ROTATION]||"0",d=mxUtils.getBoundingBox(this.bounds,c);null==d&&(d=this.bounds),this.hint.style.left=d.x+Math.round((d.width-this.hint.clientWidth)/2)+"px",this.hint.style.top=d.y+d.height+12+"px"}},mxVertexHandler.prototype.removeHint=mxGraphHandler.prototype.removeHint,mxEdgeHandler.prototype.updateHint=function(a,b){null==this.hint&&(this.hint=l(),this.state.view.graph.container.appendChild(this.hint));var c=this.graph.view.translate,d=this.graph.view.scale,e=this.roundLength(b.x/d-c.x),f=this.roundLength(b.y/d-c.y);if(this.hint.innerHTML=e+", "+f,this.hint.style.visibility="visible",this.isSource||this.isTarget)if(null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus){var g=this.constraintHandler.currentConstraint.point;this.hint.innerHTML="["+Math.round(100*g.x)+"%, "+Math.round(100*g.y)+"%]"}else this.marker.hasValidState()&&(this.hint.style.visibility="hidden");this.hint.style.left=Math.round(a.getGraphX()-this.hint.clientWidth/2)+"px",this.hint.style.top=Math.max(a.getGraphY(),b.y)+this.state.view.graph.gridSize+"px",null!=this.hideEdgeHintThread&&window.clearTimeout(this.hideEdgeHintThread),this.hideEdgeHintThread=window.setTimeout(mxUtils.bind(this,function(){null!=this.hint&&(this.hint.style.visibility="hidden")}),500)},mxEdgeHandler.prototype.removeHint=mxGraphHandler.prototype.removeHint,HoverIcons.prototype.mainHandle=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABLUlEQVQ4y61US4rCQBBNeojiRrLSnbMOWWU3V1FPouARcgc9hyLOCSSbYZw5gRCIkM9KbevJaycS4zCOBY+iq6pf1y+xrNtiE6oEY/tVzMUXgSNoCJrUDu3qHpldutwSuIKOoEvt0m7I7DoCvNj2fb8XRdEojuN5lmVraJxhh59xFSLFF9phGL7lef6hRb63R73aHM8aAjv8JHJ47yqLlud5r0VRbHa51sPZQVuT/QU4ww4/4ljaJRubrC5SxouD6TWBQV/sEIkbs0eOIVGssSO1L5D6LQID+BHHZjdMSYpj7KZpun7/uk8CP5rNqTXLJP/OpNyTMWruP9CTP08nCILKdCp7gkCzJ8vPnz2BvW5PKhuLjJBykiQLaWIEjTP3o3Zjn/LtPO0rfvh/cgKu7z6wtPPltQAAAABJRU5ErkJggg==":IMAGE_PATH+"/handle-main.png",17,17),HoverIcons.prototype.fixedHandle=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkE1NkU4Njk2QjI1MTFFNEFDMjFGQTcyODkzNTc3NkYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkE1NkU4NkE2QjI1MTFFNEFDMjFGQTcyODkzNTc3NkYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2QTU2RTg2NzZCMjUxMUU0QUMyMUZBNzI4OTM1Nzc2RiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2QTU2RTg2ODZCMjUxMUU0QUMyMUZBNzI4OTM1Nzc2RiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pmuk6K8AAAGBSURBVHjarFRBSsNQEM3/atNs6qLowixcKELoqjuXoqfQeoF6BMEj9BCC1YIXcCGlV8hGLNZlBKWlCk1JSs13Xvw/nca6UDrwmMzMy8tk/iTCWmwi52Eq53+QeWwg2bXSSNi1WiRibgRWCTahwEQmhJgw1WJGML2BC6wQnEqlsuH7fr3f7zdHo9EdPGLkUdc8mX8TJNYIpUajsR+G4YMie3pNVKebpB6GPOrgab7kr5F24Hne9ng87r6HStUuP5V1Mc2AGHnUwWMdCck6sVut1onjOHtnt4nV7M0fAuI65VEnXk3PTFq5Eyi4rnvUe1PW9fO3QOdUzvkbyqNOvEM2dMEHK2zbLr98zJ5+cJWkAvDGUC8Wi2X28Gww6bnHcTzYWp+JGAHTCQz1KIoGfFckCyZBELR3N4V1vCOyTrhHHnXw9N5kQn8+nWq1Onc6C/cERLMn7cfZniD/257wbjDxEjqiDT0fDof3tLE+PGK9HyXNy7pYyrez9K/43/+TLwEGAMb7AY6w980DAAAAAElFTkSuQmCC":IMAGE_PATH+"/handle-fixed.png",17,17),
    HoverIcons.prototype.terminalHandle=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MEMzRUVERTk2NzU1MTFFNTg5NjNEMjREQ0FFNENFQzgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MEMzRUVERUE2NzU1MTFFNTg5NjNEMjREQ0FFNENFQzgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowQzNFRURFNzY3NTUxMUU1ODk2M0QyNERDQUU0Q0VDOCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowQzNFRURFODY3NTUxMUU1ODk2M0QyNERDQUU0Q0VDOCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Poj8AGUAAAF6SURBVHjarFTBSsNAEM2u2jSXeCh6sAcPilB6ys2j6Fdo/YH6CYKf0I8QrBb8AQ9S+gu5iMV6jKC0VCEJTalZ54VNnMR4ULrwmJ2Zt5PZmdkIo3yJgsRSBfmDzPUUku2VRsz2qixIehBYJZiECgsyJ0SEhQ6WBkwO8AArBKvZbG64rtsej8dd3/fvIKHDDr/myeJNYFgj2J1OZz8IggdF6+k1VoNhnEgs2OEHT/Mlv0aSQaPR2A7DcPgeKNW6/FTGxSIDdNjhB49lJCTLxOz1eieWZe2d3cZGd5RvAvQ22eEnXkvXTBqFDlTq9frR6E0Z18+qtO83ZIefeIes6IIXVpimWXv5yB8cnMqcDn+1Wq2xj2eFSfoeRdFkaz0f5OAqzunwz2azCZ8VyZS553n93U1hHO+I0uvADj94em6yQH/ujuM4ue6UzgmI6Zz0H7/nBPbf5oRng4rbyIgm9Hw6nd7TxLqQ0PV82JqXZbGUt7P0V/zv/8mXAAMASSz1f9Cd7ycAAAAASUVORK5CYII=":IMAGE_PATH+"/handle-terminal.png",17,17),HoverIcons.prototype.secondaryHandle=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MEJBMUVERjNEMkZDMTFFM0I0Qzc5RkE1RTc2NjI0OUIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MEJBMUVERjREMkZDMTFFM0I0Qzc5RkE1RTc2NjI0OUIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowQkExRURGMUQyRkMxMUUzQjRDNzlGQTVFNzY2MjQ5QiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowQkExRURGMkQyRkMxMUUzQjRDNzlGQTVFNzY2MjQ5QiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvXDOj4AAAFqSURBVHjarFTNToNAEN5FLeiBmDRe7MGLF4IXbp71KapP4CPoO/QdvKiv4ME0PkAvJI2J0SueIHgAAk3b7XxkwSlgE38mmSwz8+3HsPMtUnSbbKww1VhbYB5XbrBnpX3JnlUXSbURvk1ukvcYyYy8IJ9rsoqw3MAJtsh3Xdc98H3/KgzDuyRJHrEiRh51jTOaX4LEDrk9Go1O0zR9UWTL9E0to+dyhSGPOnAab/DPKDtwHOcoy7LXz1SpxeRSzW9F7YiRRx041pGsSMC6Ty1f442LycUawRfRsOyIcDfA632ST6A3GAzOVfYu1PS+c+5q+iBQJ9wZO3TJD1aaptkX+YfYaFS3LKvPXl4fTDn3oigiYR1uJqF6nucR14rBglkQBGO5dyzkybBbxpRHHTitm5rox9PxPK81nZZOAKx1Eo5rnSD/nU54NzhxGx1hjHEcP5FifayItT5sjVvTyJ/vzr/f4l//T1YCDAC4VAdLL1OIRAAAAABJRU5ErkJggg==":IMAGE_PATH+"/handle-secondary.png",17,17),HoverIcons.prototype.rotationHandle=new mxImage(mxClient.IS_SVG?"data:image/png;base64,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":IMAGE_PATH+"/handle-rotate.png",19,21),mxVertexHandler.prototype.handleImage=HoverIcons.prototype.mainHandle,mxVertexHandler.prototype.secondaryHandleImage=HoverIcons.prototype.secondaryHandle,mxEdgeHandler.prototype.handleImage=HoverIcons.prototype.mainHandle,mxEdgeHandler.prototype.terminalHandleImage=HoverIcons.prototype.terminalHandle,mxEdgeHandler.prototype.fixedHandleImage=HoverIcons.prototype.fixedHandle,mxEdgeHandler.prototype.labelHandleImage=HoverIcons.prototype.secondaryHandle,mxOutline.prototype.sizerImage=HoverIcons.prototype.mainHandle,null!=window.Sidebar&&(Sidebar.prototype.triangleUp=HoverIcons.prototype.triangleUp,Sidebar.prototype.triangleRight=HoverIcons.prototype.triangleRight,Sidebar.prototype.triangleDown=HoverIcons.prototype.triangleDown,Sidebar.prototype.triangleLeft=HoverIcons.prototype.triangleLeft,Sidebar.prototype.refreshTarget=HoverIcons.prototype.refreshTarget,Sidebar.prototype.roundDrop=HoverIcons.prototype.roundDrop),mxClient.IS_SVG||((new Image).src=HoverIcons.prototype.mainHandle.src,(new Image).src=HoverIcons.prototype.fixedHandle.src,(new Image).src=HoverIcons.prototype.terminalHandle.src,(new Image).src=HoverIcons.prototype.secondaryHandle.src,(new Image).src=HoverIcons.prototype.rotationHandle.src,(new Image).src=HoverIcons.prototype.triangleUp.src,(new Image).src=HoverIcons.prototype.triangleRight.src,(new Image).src=HoverIcons.prototype.triangleDown.src,(new Image).src=HoverIcons.prototype.triangleLeft.src,(new Image).src=HoverIcons.prototype.refreshTarget.src,(new Image).src=HoverIcons.prototype.roundDrop.src),mxVertexHandler.prototype.rotationEnabled=!0,mxVertexHandler.prototype.manageSizers=!0,mxVertexHandler.prototype.livePreview=!0,mxRubberband.prototype.defaultOpacity=30,mxConnectionHandler.prototype.outlineConnect=!0,mxCellHighlight.prototype.keepOnTop=!0,mxVertexHandler.prototype.parentHighlightEnabled=!0,mxVertexHandler.prototype.rotationHandleVSpacing=-20,mxEdgeHandler.prototype.parentHighlightEnabled=!0,mxEdgeHandler.prototype.dblClickRemoveEnabled=!0,mxEdgeHandler.prototype.straightRemoveEnabled=!0,mxEdgeHandler.prototype.virtualBendsEnabled=!0,mxEdgeHandler.prototype.mergeRemoveEnabled=!0,mxEdgeHandler.prototype.manageLabelHandle=!0,mxEdgeHandler.prototype.outlineConnect=!0,mxEdgeHandler.prototype.isAddVirtualBendEvent=function(a){return!mxEvent.isShiftDown(a.getEvent())},mxEdgeHandler.prototype.isCustomHandleEvent=function(a){return!mxEvent.isShiftDown(a.getEvent())},Graph.touchStyle){(mxClient.IS_TOUCH||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&(mxShape.prototype.svgStrokeTolerance=18,mxVertexHandler.prototype.tolerance=12,mxEdgeHandler.prototype.tolerance=12,Graph.prototype.tolerance=12,mxVertexHandler.prototype.rotationHandleVSpacing=-24,mxConstraintHandler.prototype.getTolerance=function(a){return mxEvent.isMouseEvent(a.getEvent())?4:this.graph.getTolerance()}),mxPanningHandler.prototype.isPanningTrigger=function(a){var b=a.getEvent();return null==a.getState()&&!mxEvent.isMouseEvent(b)||mxEvent.isPopupTrigger(b)&&(null==a.getState()||mxEvent.isControlDown(b)||mxEvent.isShiftDown(b))};var n=mxGraphHandler.prototype.mouseDown;mxGraphHandler.prototype.mouseDown=function(a,b){n.apply(this,arguments),mxEvent.isTouchEvent(b.getEvent())&&this.graph.isCellSelected(b.getCell())&&this.graph.getSelectionCount()>1&&(this.delayedSelection=!1)}}else mxPanningHandler.prototype.isPanningTrigger=function(a){var b=a.getEvent();return mxEvent.isLeftMouseButton(b)&&(this.useLeftButtonForPanning&&null==a.getState()||mxEvent.isControlDown(b)&&!mxEvent.isShiftDown(b))||this.usePopupTrigger&&mxEvent.isPopupTrigger(b)};mxRubberband.prototype.isSpaceEvent=function(a){return this.graph.isEnabled()&&!this.graph.isCellLocked(this.graph.getDefaultParent())&&mxEvent.isControlDown(a.getEvent())&&mxEvent.isShiftDown(a.getEvent())},mxRubberband.prototype.mouseUp=function(a,b){var c=null!=this.div&&"none"!=this.div.style.display,d=null,e=null,f=null,g=null;if(null!=this.first&&null!=this.currentX&&null!=this.currentY&&(d=this.first.x,e=this.first.y,f=(this.currentX-d)/this.graph.view.scale,g=(this.currentY-e)/this.graph.view.scale,mxEvent.isAltDown(b.getEvent())||(f=this.graph.snap(f),g=this.graph.snap(g))),this.reset(),c){if(mxEvent.isAltDown(b.getEvent())&&this.graph.isToggleEvent(b.getEvent())){var h=new mxRectangle(this.x,this.y,this.width,this.height),i=this.graph.getCells(h.x,h.y,h.width,h.height);this.graph.removeSelectionCells(i)}else if(this.isSpaceEvent(b)){this.graph.model.beginUpdate();try{for(var i=this.graph.getCellsBeyond(d,e,this.graph.getDefaultParent(),!0,!0),j=0;j<i.length;j++)if(this.graph.isCellMovable(i[j])){var k=this.graph.view.getState(i[j]),l=this.graph.getCellGeometry(i[j]);null!=k&&null!=l&&(l=l.clone(),l.translate(f,g),this.graph.model.setGeometry(i[j],l))}}finally{this.graph.model.endUpdate()}}else{var h=new mxRectangle(this.x,this.y,this.width,this.height);this.graph.selectRegion(h,b.getEvent())}b.consume()}},mxRubberband.prototype.mouseMove=function(a,b){if(!b.isConsumed()&&null!=this.first){var c=mxUtils.getScrollOrigin(this.graph.container),d=mxUtils.getOffset(this.graph.container);c.x-=d.x,c.y-=d.y;var e=b.getX()+c.x,f=b.getY()+c.y,g=this.first.x-e,h=this.first.y-f,i=this.graph.tolerance;if(null!=this.div||Math.abs(g)>i||Math.abs(h)>i){if(null==this.div&&(this.div=this.createShape()),mxUtils.clearSelection(),this.update(e,f),this.isSpaceEvent(b)){var j=this.x+this.width,k=this.y+this.height,l=this.graph.view.scale;mxEvent.isAltDown(b.getEvent())||(this.width=this.graph.snap(this.width/l)*l,this.height=this.graph.snap(this.height/l)*l,this.graph.isGridEnabled()||(this.width<this.graph.tolerance&&(this.width=0),this.height<this.graph.tolerance&&(this.height=0)),this.x<this.first.x&&(this.x=j-this.width),this.y<this.first.y&&(this.y=k-this.height)),this.div.style.borderStyle="dashed",this.div.style.backgroundColor="white",this.div.style.left=this.x+"px",this.div.style.top=this.y+"px",this.div.style.width=Math.max(0,this.width)+"px",this.div.style.height=this.graph.container.clientHeight+"px",this.div.style.borderWidth=this.width<=0?"0px 1px 0px 0px":"0px 1px 0px 1px",null==this.secondDiv&&(this.secondDiv=this.div.cloneNode(!0),this.div.parentNode.appendChild(this.secondDiv)),this.secondDiv.style.left=this.x+"px",this.secondDiv.style.top=this.y+"px",this.secondDiv.style.width=this.graph.container.clientWidth+"px",this.secondDiv.style.height=Math.max(0,this.height)+"px",this.secondDiv.style.borderWidth=this.height<=0?"1px 0px 0px 0px":"1px 0px 1px 0px"}else this.div.style.backgroundColor="",this.div.style.borderWidth="",this.div.style.borderStyle="",null!=this.secondDiv&&(this.secondDiv.parentNode.removeChild(this.secondDiv),this.secondDiv=null);b.consume()}}};var o=mxRubberband.prototype.reset;mxRubberband.prototype.reset=function(){null!=this.secondDiv&&(this.secondDiv.parentNode.removeChild(this.secondDiv),this.secondDiv=null),o.apply(this,arguments)};var p=(new Date).getTime(),q=0,r=mxEdgeHandler.prototype.updatePreviewState;mxEdgeHandler.prototype.updatePreviewState=function(a,b,c,d){r.apply(this,arguments),c!=this.currentTerminalState?(p=(new Date).getTime(),q=0):q=(new Date).getTime()-p,this.currentTerminalState=c};var s=mxEdgeHandler.prototype.isOutlineConnectEvent;mxEdgeHandler.prototype.isOutlineConnectEvent=function(a){return null!=this.currentTerminalState&&a.getState()==this.currentTerminalState&&q>2e3||(null==this.currentTerminalState||"0"!=mxUtils.getValue(this.currentTerminalState.style,"outlineConnect","1"))&&s.apply(this,arguments)},mxVertexHandler.prototype.isCustomHandleEvent=function(a){return!mxEvent.isShiftDown(a.getEvent())},mxEdgeHandler.prototype.createHandleShape=function(a,b){var c=null!=a&&0==a,d=this.state.getVisibleTerminalState(c),e=null!=a&&(0==a||a>=this.state.absolutePoints.length-1||this.constructor==mxElbowEdgeHandler&&2==a)?this.graph.getConnectionConstraint(this.state,d,c):null,f=null!=e?this.graph.getConnectionPoint(this.state.getVisibleTerminalState(c),e):null,g=null!=f?this.fixedHandleImage:null!=e&&null!=d?this.terminalHandleImage:this.handleImage;if(null!=g){var h=new mxImageShape(new mxRectangle(0,0,g.width,g.height),g.src);return h.preserveImageAspect=!1,h}var i=mxConstants.HANDLE_SIZE;return this.preferHtml&&(i-=1),new mxRectangleShape(new mxRectangle(0,0,i,i),mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)};var t=mxVertexHandler.prototype.createSizerShape;mxVertexHandler.prototype.createSizerShape=function(a,b,c){return this.handleImage=b==mxEvent.ROTATION_HANDLE?HoverIcons.prototype.rotationHandle:b==mxEvent.LABEL_HANDLE?this.secondaryHandleImage:this.handleImage,t.apply(this,arguments)};var u=mxGraphHandler.prototype.getBoundingBox;mxGraphHandler.prototype.getBoundingBox=function(a){if(null!=a&&1==a.length){var b=this.graph.getModel(),c=b.getParent(a[0]),d=this.graph.getCellGeometry(a[0]);if(b.isEdge(c)&&null!=d&&d.relative){var e=this.graph.view.getState(a[0]);if(null!=e&&e.width<2&&e.height<2&&null!=e.text&&null!=e.text.boundingBox)return mxRectangle.fromRectangle(e.text.boundingBox)}}return u.apply(this,arguments)};var v=mxVertexHandler.prototype.getSelectionBounds;mxVertexHandler.prototype.getSelectionBounds=function(a){var b=this.graph.getModel(),c=b.getParent(a.cell),d=this.graph.getCellGeometry(a.cell);if(b.isEdge(c)&&null!=d&&d.relative&&a.width<2&&a.height<2&&null!=a.text&&null!=a.text.boundingBox){var e=a.text.unrotatedBoundingBox||a.text.boundingBox;return new mxRectangle(Math.round(e.x),Math.round(e.y),Math.round(e.width),Math.round(e.height))}return v.apply(this,arguments)};var w=mxVertexHandler.prototype.mouseDown;mxVertexHandler.prototype.mouseDown=function(a,b){var c=this.graph.getModel(),d=c.getParent(this.state.cell),e=this.graph.getCellGeometry(this.state.cell),f=this.getHandleForEvent(b);(f==mxEvent.ROTATION_HANDLE||!c.isEdge(d)||null==e||!e.relative||null==this.state||this.state.width>=2||this.state.height>=2)&&w.apply(this,arguments)},mxVertexHandler.prototype.isRotationHandleVisible=function(){return this.graph.isEnabled()&&this.rotationEnabled&&this.graph.isCellRotatable(this.state.cell)&&(mxGraphHandler.prototype.maxCells<=0||this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells)},mxVertexHandler.prototype.rotateClick=function(){this.state.view.graph.turnShapes([this.state.cell])};var x=mxVertexHandler.prototype.mouseMove;mxVertexHandler.prototype.mouseMove=function(a,b){x.apply(this,arguments),null!=this.graph.graphHandler.first&&null!=this.rotationShape&&null!=this.rotationShape.node&&(this.rotationShape.node.style.display="none")};var y=mxVertexHandler.prototype.mouseUp;mxVertexHandler.prototype.mouseUp=function(a,b){y.apply(this,arguments),null!=this.rotationShape&&null!=this.rotationShape.node&&(this.rotationShape.node.style.display=1==this.graph.getSelectionCount()?"":"none")};var z=mxVertexHandler.prototype.init;mxVertexHandler.prototype.init=function(){z.apply(this,arguments);var a=!1;null!=this.rotationShape&&this.rotationShape.node.setAttribute("title",mxResources.get("rotateTooltip"));var b=mxUtils.bind(this,function(){null!=this.rotationShape&&null!=this.rotationShape.node&&(this.rotationShape.node.style.display=1==this.graph.getSelectionCount()?"":"none"),null!=this.specialHandle&&(this.specialHandle.node.style.display=this.graph.isEnabled()&&this.graph.getSelectionCount()<this.graph.graphHandler.maxCells?"":"none"),this.redrawHandles()});this.selectionHandler=mxUtils.bind(this,function(a,c){b()}),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,this.selectionHandler),this.changeHandler=mxUtils.bind(this,function(a,c){this.updateLinkHint(this.graph.getLinkForCell(this.state.cell)),b()}),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler),this.editingHandler=mxUtils.bind(this,function(a,b){this.redrawHandles()}),this.graph.addListener(mxEvent.EDITING_STOPPED,this.editingHandler);var c=this.graph.getLinkForCell(this.state.cell);this.updateLinkHint(c),null!=c&&(a=!0),a&&this.redrawHandles()},mxVertexHandler.prototype.updateLinkHint=function(a){if(null==a||this.graph.getSelectionCount()>1)null!=this.linkHint&&(this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null);else if(null!=a){null==this.linkHint&&(this.linkHint=l(),this.linkHint.style.padding="4px 10px 6px 10px",this.linkHint.style.fontSize="90%",this.linkHint.style.opacity="1",this.linkHint.style.filter="",this.updateLinkHint(a),this.graph.container.appendChild(this.linkHint));var b=a,c=60,d=36,e=20;b.length>c&&(b=b.substring(0,d)+"..."+b.substring(b.length-e));var f=document.createElement("a");if(f.setAttribute("href",this.graph.getAbsoluteUrl(a)),f.setAttribute("title",a),null!=this.graph.linkTarget&&f.setAttribute("target",this.graph.linkTarget),mxUtils.write(f,b),this.linkHint.innerHTML="",this.linkHint.appendChild(f),this.graph.isEnabled()&&"function"==typeof this.graph.editLink){var g=document.createElement("img");g.setAttribute("src",IMAGE_PATH+"/edit.gif"),g.setAttribute("title",mxResources.get("editLink")),g.setAttribute("width","11"),g.setAttribute("height","11"),g.style.marginLeft="10px",g.style.marginBottom="-1px",g.style.cursor="pointer",this.linkHint.appendChild(g),mxEvent.addListener(g,"click",mxUtils.bind(this,function(a){this.graph.setSelectionCell(this.state.cell),this.graph.editLink(),mxEvent.consume(a)}))}}},mxEdgeHandler.prototype.updateLinkHint=mxVertexHandler.prototype.updateLinkHint;var A=mxEdgeHandler.prototype.init;mxEdgeHandler.prototype.init=function(){A.apply(this,arguments),this.constraintHandler.isEnabled=mxUtils.bind(this,function(){return this.state.view.graph.connectionHandler.isEnabled()});var a=mxUtils.bind(this,function(){null!=this.linkHint&&(this.linkHint.style.display=1==this.graph.getSelectionCount()?"":"none"),null!=this.labelShape&&(this.labelShape.node.style.display=this.graph.isEnabled()&&this.graph.getSelectionCount()<this.graph.graphHandler.maxCells?"":"none")});this.selectionHandler=mxUtils.bind(this,function(b,c){a()}),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,this.selectionHandler),this.changeHandler=mxUtils.bind(this,function(b,c){this.updateLinkHint(this.graph.getLinkForCell(this.state.cell)),a(),this.redrawHandles()}),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler);var b=this.graph.getLinkForCell(this.state.cell);null!=b&&(this.updateLinkHint(b),this.redrawHandles())};var B=mxConnectionHandler.prototype.init;mxConnectionHandler.prototype.init=function(){B.apply(this,arguments),this.constraintHandler.isEnabled=mxUtils.bind(this,function(){return this.graph.connectionHandler.isEnabled()})};var C=mxVertexHandler.prototype.redrawHandles;mxVertexHandler.prototype.redrawHandles=function(){if(C.apply(this),null!=this.state&&null!=this.linkHint){var a=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),b=new mxRectangle(this.state.x,this.state.y-22,this.state.width+24,this.state.height+22),c=mxUtils.getBoundingBox(b,this.state.style[mxConstants.STYLE_ROTATION]||"0",a),d=null!=c?mxUtils.getBoundingBox(this.state,this.state.style[mxConstants.STYLE_ROTATION]||"0"):this.state;null==c&&(c=this.state),this.linkHint.style.left=Math.round(d.x+(d.width-this.linkHint.clientWidth)/2)+"px",this.linkHint.style.top=Math.round(c.y+c.height+this.verticalOffset/2+6+this.state.view.graph.tolerance)+"px"}};var D=mxVertexHandler.prototype.reset;mxVertexHandler.prototype.reset=function(){D.apply(this,arguments),null!=this.rotationShape&&null!=this.rotationShape.node&&(this.rotationShape.node.style.display=1==this.graph.getSelectionCount()?"":"none")};var E=mxVertexHandler.prototype.destroy;mxVertexHandler.prototype.destroy=function(){E.apply(this,arguments),null!=this.linkHint&&(this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null),null!=this.selectionHandler&&(this.graph.getSelectionModel().removeListener(this.selectionHandler),this.selectionHandler=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null),null!=this.editingHandler&&(this.graph.removeListener(this.editingHandler),this.editingHandler=null)};var F=mxEdgeHandler.prototype.redrawHandles;mxEdgeHandler.prototype.redrawHandles=function(){if(null!=this.marker&&(F.apply(this),null!=this.state&&null!=this.linkHint)){var a=this.state;null!=this.state.text&&null!=this.state.text.bounds&&(a=new mxRectangle(a.x,a.y,a.width,a.height),a.add(this.state.text.bounds)),this.linkHint.style.left=Math.round(a.x+(a.width-this.linkHint.clientWidth)/2)+"px",this.linkHint.style.top=Math.round(a.y+a.height+6+this.state.view.graph.tolerance)+"px"}};var G=mxEdgeHandler.prototype.reset;mxEdgeHandler.prototype.reset=function(){G.apply(this,arguments),null!=this.linkHint&&(this.linkHint.style.visibility="")};var H=mxEdgeHandler.prototype.destroy;mxEdgeHandler.prototype.destroy=function(){H.apply(this,arguments),null!=this.linkHint&&(this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null),null!=this.selectionHandler&&(this.graph.getSelectionModel().removeListener(this.selectionHandler),this.selectionHandler=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null)}}();